{"version":3,"sources":["D2App/components/CustomAppDetails/CustomAppDetails.module.css","D2App/App.module.css","D2App/components/AppList/AppIcon.module.css","D2App/components/AppList/AppList.module.css","D2App/components/ManualInstall/ManualInstall.module.css","D2App/components/Sidebar/Sidebar.module.css","D2App/api.js","D2App/core-apps.js","D2App/get-latest-version.js","D2App/components/CustomAppDetails/channel-to-display-name.js","D2App/components/CustomAppDetails/Versions.js","D2App/components/AppDetails/AppDetails.js","D2App/components/AppList/AppIcon.js","D2App/components/AppList/index.js","D2App/components/CoreApps/CoreApps.js","D2App/components/CustomAppDetails/index.js","D2App/components/CustomApps/index.js","D2App/components/ManualInstall/index.js","D2App/components/Sidebar/index.js","D2App/locales/index.js","D2App/App.js"],"names":["module","exports","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Api","constructor","baseUrl","this","url","method","body","fetch","concat","credentials","then","res","status","Error","statusText","versionId","request","appKey","file","data","FormData","append","useApi","useConfig","coreApps","name","short_name","map","coreApp","bundled","developer","company","versions","reduce","latestVersion","version","parsedLatestVersion","semver","coerce","parsedVersion","gt","channelToDisplayName","stable","i18n","t","context","development","canary","ChannelCheckbox","label","channelsFilter","setChannelsFilter","React","createElement","className","styles","channelCheckbox","Checkbox","checked","has","disabled","size","onChange","newState","Set","add","delete","Filters","dhisVersionFilter","setDhisVersionFilter","dhisVersions","versionsFilters","sectionSubheader","keys","filter","channel","some","v","dhisVersionSelect","SingleSelectField","placeholder","clearable","selected","dhisVersion","SingleSelectOption","VersionsTable","installedVersion","onVersionInstall","Table","TableHead","TableRowHead","TableCellHead","TableBody","TableRow","id","TableCell","min","minDhisVersion","max","maxDhisVersion","moment","created","format","Button","small","secondary","installBtn","onClick","download","href","downloadUrl","Versions","reloadPage","useState","installSuccessAlert","useAlert","success","installErrorAlert","error","errorMessage","message","nsSeparator","critical","apiVersion","installVersion","dhisVersionFilterSemver","filteredVersions","range","Range","satisfies","versionsContainer","async","show","ManageInstalledVersion","installedApp","uninstallApp","successAlert","errorAlert","getLatestVersion","manageInstalledVersion","Fragment","primary","manageInstalledVersionDescription","versionRange","renderVersionRange","Metadata","relativeTime","datetime","fromNow","sort","a","b","metadataList","metadataItem","length","Screenshots","screenshots","currentScreenshotIndex","setCurrentScreenshotIndex","currentScreenshot","src","screenshot","index","otherScreenshot","otherScreenshotCurrent","appsQuery","modules","resource","installedApps","appHubQuery","app","appHubId","AppDetails","match","_appHubResponse$data","params","appsResponse","useDataQuery","appHubResponse","lazy","NoticeBox","title","loading","CenteredContent","CircularLoader","find","app_hub_id","displayName","called","refetch","appHubApp","images","i","logo","imageUrl","Card","appCard","header","headerName","headerDeveloper","Divider","section","mainSection","join","sectionHeader","description","getIconSrc","iconSize","icons","FallbackIcon","viewBox","fill","fillRule","height","rx","width","d","AppIcon","appIcon","AppCards","apps","history","useHistory","appCards","_app$developer","_app$developer2","push","appCardName","appCardMetadata","AppsWithUpdates","appsWithUpdates","AllApps","AppList","updatesAvailableLabel","allAppsLabel","searchLabel","query","setQuery","useQueryParam","withDefault","StringParam","searchFilter","toLocaleLowerCase","includes","filteredApps","filteredAppsWithUpdates","InputField","searchField","appHub","CoreApps","overridenCoreApps","overridenApp","m","iconUrl","icon","48","CustomAppDetails","_installedApp","_installedApp2","variables","organisation","customApps","CustomApps","errorLabel","UploadButton","uploadApp","isUploading","setIsUploading","formEl","useRef","inputEl","hiddenForm","ref","type","accept","event","target","files","current","reset","uploadBtn","click","ManualInstall","warning","SidebarItem","path","exactMatch","isActive","routeMatch","useRouteMatch","isExact","useIsItemActive","MenuItem","sidebarItem","active","Sidebar","Menu","minor","patch","showCoreApps","serverVersion","namespace","addResources","arTranslations","csTranslations","enTranslations","frTranslations","idTranslations","nbTranslations","ruTranslations","svTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","App","HashRouter","QueryParamProvider","ReactRouterRoute","Route","stringifyOptions","skipEmptyString","CssVariables","spacers","colors","container","sidebar","content","Switch","exact","component","Redirect","from","to"],"mappings":"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","file":"static/js/app.e1599281.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"appCard\":\"CustomAppDetails_appCard__38KU-\",\"header\":\"CustomAppDetails_header__1-cnt\",\"section\":\"CustomAppDetails_section__1K6bg\",\"headerName\":\"CustomAppDetails_headerName__1KMx9\",\"headerDeveloper\":\"CustomAppDetails_headerDeveloper__srC4n\",\"sectionHeader\":\"CustomAppDetails_sectionHeader__19qaL\",\"sectionSubheader\":\"CustomAppDetails_sectionSubheader__2tVs2\",\"mainSection\":\"CustomAppDetails_mainSection__21l0M\",\"manageInstalledVersion\":\"CustomAppDetails_manageInstalledVersion__1-SZz\",\"manageInstalledVersionDescription\":\"CustomAppDetails_manageInstalledVersionDescription__3Rq3D\",\"metadataList\":\"CustomAppDetails_metadataList__3lhaF\",\"metadataItem\":\"CustomAppDetails_metadataItem__2KJS6\",\"screenshots\":\"CustomAppDetails_screenshots__tZhvY\",\"currentScreenshot\":\"CustomAppDetails_currentScreenshot__2twz2\",\"otherScreenshot\":\"CustomAppDetails_otherScreenshot__bx5Uu\",\"otherScreenshotCurrent\":\"CustomAppDetails_otherScreenshotCurrent__1tvTJ\",\"versionsContainer\":\"CustomAppDetails_versionsContainer__3_3ev\",\"versionsFilters\":\"CustomAppDetails_versionsFilters__1rZJo\",\"channelCheckbox\":\"CustomAppDetails_channelCheckbox__3u7y2\",\"dhisVersionSelect\":\"CustomAppDetails_dhisVersionSelect__kHSs0\",\"installBtn\":\"CustomAppDetails_installBtn__1eW8p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2zgzu\",\"sidebar\":\"App_sidebar__10tAV\",\"content\":\"App_content__3I8HS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appIcon\":\"AppIcon_appIcon__25Ztn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppList_header__3IUsK\",\"searchField\":\"AppList_searchField__2PImm\",\"appsWithUpdates\":\"AppList_appsWithUpdates__1WTeb\",\"appCards\":\"AppList_appCards__2Fi0q\",\"appCard\":\"AppList_appCard__HBwgF\",\"appCardName\":\"AppList_appCardName__2nQwS\",\"appCardMetadata\":\"AppList_appCardMetadata__3aj-V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ManualInstall_header__ftEwe\",\"warning\":\"ManualInstall_warning__rrH3U\",\"uploadBtn\":\"ManualInstall_uploadBtn__tBLwi\",\"hiddenForm\":\"ManualInstall_hiddenForm__bfgUZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarItem\":\"Sidebar_sidebarItem__3GXPY\"};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useConfig } from '@dhis2/app-runtime';\n\nclass Api {\n  constructor({\n    baseUrl\n  }) {\n    _defineProperty(this, \"request\", ({\n      url,\n      method,\n      body\n    }) => fetch(\"\".concat(this.baseUrl, \"/api/\").concat(url), {\n      method,\n      body,\n      credentials: 'include'\n    }).then(res => {\n      if (res.status < 200 || res.status >= 300) {\n        throw new Error(res.statusText);\n      }\n\n      return res;\n    }));\n\n    _defineProperty(this, \"installVersion\", versionId => this.request({\n      url: \"appHub/\".concat(versionId),\n      method: 'post'\n    }));\n\n    _defineProperty(this, \"uninstallApp\", appKey => this.request({\n      url: \"apps/\".concat(appKey),\n      method: 'delete'\n    }));\n\n    _defineProperty(this, \"uploadApp\", file => {\n      const data = new FormData();\n      data.append('file', file);\n      return this.request({\n        url: 'apps',\n        method: 'post',\n        body: data\n      });\n    });\n\n    this.baseUrl = baseUrl;\n  }\n\n}\n\nexport const useApi = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  return new Api({\n    baseUrl\n  });\n};","export const coreApps = [{\n  name: 'App Management',\n  short_name: 'app-management'\n}, {\n  name: 'Cache Cleaner',\n  short_name: 'cache-cleaner'\n}, {\n  name: 'Capture',\n  short_name: 'capture'\n}, {\n  name: 'Dashboard',\n  short_name: 'dashboard'\n}, {\n  name: 'Data Administration',\n  short_name: 'data-administration'\n}, {\n  name: 'Data Approval',\n  short_name: 'approval'\n}, {\n  name: 'Data Entry',\n  short_name: 'dataentry'\n}, {\n  name: 'Data Quality',\n  short_name: 'data-quality'\n}, {\n  name: 'Data Visualizer',\n  short_name: 'data-visualizer'\n}, {\n  name: 'Datastore',\n  short_name: 'datastore'\n}, {\n  name: 'Event Reports',\n  short_name: 'event-reports'\n}, {\n  name: 'Event Visualizer',\n  short_name: 'event-visualizer'\n}, {\n  name: 'Import/Export',\n  short_name: 'import-export'\n}, {\n  name: 'Interpretations',\n  short_name: 'interpretation'\n}, {\n  name: 'Maintenance',\n  short_name: 'maintenance'\n}, {\n  name: 'Maps',\n  short_name: 'maps'\n}, {\n  name: 'Menu Management',\n  short_name: 'menu-management'\n}, {\n  name: 'Messaging',\n  short_name: 'messaging'\n}, {\n  name: 'Pivot Table',\n  short_name: 'pivot'\n}, {\n  name: 'Reports',\n  short_name: 'reports'\n}, {\n  name: 'SMS Configuration',\n  short_name: 'sms-configuration'\n}, {\n  name: 'Scheduler',\n  short_name: 'scheduler'\n}, {\n  name: 'System Settings',\n  short_name: 'settings'\n}, {\n  name: 'Tracker Capture',\n  short_name: 'tracker-capture'\n}, {\n  name: 'Translations',\n  short_name: 'translations'\n}, {\n  name: 'Usage Analytics',\n  short_name: 'usage-analytics'\n}, {\n  name: 'User Profile',\n  short_name: 'user-profile'\n}, {\n  name: 'Users',\n  short_name: 'user'\n}].map(coreApp => ({ ...coreApp,\n  key: coreApp.short_name,\n  bundled: true,\n  developer: {\n    company: 'DHIS2'\n  }\n}));","import semver from 'semver';\nexport default (versions => versions.reduce((latestVersion, version) => {\n  const parsedLatestVersion = semver.coerce(latestVersion.version);\n  const parsedVersion = semver.coerce(version.version);\n\n  if (parsedVersion) {\n    if (!parsedLatestVersion) {\n      return version;\n    }\n\n    return semver.gt(parsedVersion, parsedLatestVersion) ? version : latestVersion;\n  } else {\n    return latestVersion;\n  }\n}, versions[0]));","import i18n from '@dhis2/d2-i18n';\nexport const channelToDisplayName = {\n  stable: i18n.t('Stable', {\n    context: 'Name of AppHub release channel'\n  }),\n  development: i18n.t('Development', {\n    context: 'Name of AppHub release channel'\n  }),\n  canary: i18n.t('Canary', {\n    context: 'Name of AppHub release channel'\n  })\n};","import { useAlert, useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Checkbox, SingleSelectField, SingleSelectOption, Button, Table, TableHead, TableRowHead, TableCellHead, TableBody, TableRow, TableCell } from '@dhis2/ui';\nimport moment from 'moment';\nimport React, { useState } from 'react';\nimport semver from 'semver';\nimport { useApi } from '../../api';\nimport { channelToDisplayName } from './channel-to-display-name';\nimport styles from './CustomAppDetails.module.css';\n\nconst ChannelCheckbox = ({\n  name,\n  label,\n  channelsFilter,\n  setChannelsFilter\n}) => {\n  const handleChange = ({\n    checked\n  }) => {\n    const newState = new Set(channelsFilter);\n\n    if (checked) {\n      newState.add(name);\n    } else {\n      newState.delete(name);\n    }\n\n    setChannelsFilter(newState);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.channelCheckbox\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: channelsFilter.has(name),\n    disabled: channelsFilter.size === 1 && channelsFilter.has(name),\n    onChange: handleChange,\n    label: label\n  }));\n};\n\nChannelCheckbox.propTypes = {\n  channelsFilter: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  setChannelsFilter: PropTypes.func.isRequired\n};\n\nconst Filters = ({\n  versions,\n  channelsFilter,\n  setChannelsFilter,\n  dhisVersionFilter,\n  setDhisVersionFilter,\n  dhisVersions\n}) => {\n  const hasChannel = channel => versions.some(v => v.channel === channel);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.versionsFilters\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.sectionSubheader\n  }, i18n.t('Channel', {\n    context: 'AppHub release channel'\n  })), Object.keys(channelToDisplayName).filter(hasChannel).map(name => /*#__PURE__*/React.createElement(ChannelCheckbox, {\n    key: name,\n    name: name,\n    label: channelToDisplayName[name],\n    channelsFilter: channelsFilter,\n    setChannelsFilter: setChannelsFilter\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dhisVersionSelect\n  }, /*#__PURE__*/React.createElement(SingleSelectField, {\n    placeholder: i18n.t('Select a version'),\n    label: i18n.t('Compatible with DHIS2 version'),\n    clearable: true,\n    selected: dhisVersionFilter,\n    onChange: ({\n      selected\n    }) => setDhisVersionFilter(selected)\n  }, dhisVersions.map(dhisVersion => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: dhisVersion,\n    label: dhisVersion,\n    value: dhisVersion\n  })))));\n};\n\nFilters.propTypes = {\n  channelsFilter: PropTypes.object.isRequired,\n  dhisVersionFilter: PropTypes.string.isRequired,\n  dhisVersions: PropTypes.array.isRequired,\n  setChannelsFilter: PropTypes.func.isRequired,\n  setDhisVersionFilter: PropTypes.func.isRequired,\n  versions: PropTypes.array.isRequired\n};\n\nconst VersionsTable = ({\n  installedVersion,\n  versions,\n  onVersionInstall\n}) => {\n  const renderVersionRange = (min, max) => {\n    if (min && max) {\n      return \"\".concat(min, \"\\u2013\").concat(max);\n    } else if (min && !max) {\n      return i18n.t('{{minDhisVersion}} and above', {\n        minDhisVersion: min\n      });\n    } else if (!min && max) {\n      return i18n.t('{{maxDhisVersion}} and below', {\n        maxDhisVersion: max\n      });\n    } else {\n      return i18n.t('All versions');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Version')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Channel', {\n    context: 'AppHub release channel'\n  })), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('DHIS2 version compatibility')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Upload date')), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, versions.map(version => /*#__PURE__*/React.createElement(TableRow, {\n    key: version.id\n  }, /*#__PURE__*/React.createElement(TableCell, null, version.version), /*#__PURE__*/React.createElement(TableCell, null, channelToDisplayName[version.channel]), /*#__PURE__*/React.createElement(TableCell, null, renderVersionRange(version.minDhisVersion, version.maxDhisVersion)), /*#__PURE__*/React.createElement(TableCell, null, moment(version.created).format('L')), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true,\n    className: styles.installBtn,\n    disabled: version.version === installedVersion,\n    onClick: () => onVersionInstall(version)\n  }, version.version === installedVersion ? i18n.t('Installed') : i18n.t('Install')), /*#__PURE__*/React.createElement(\"a\", {\n    download: true,\n    href: version.downloadUrl\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true\n  }, i18n.t('Download'))))))));\n};\n\nVersionsTable.propTypes = {\n  versions: PropTypes.array.isRequired,\n  onVersionInstall: PropTypes.func.isRequired,\n  installedVersion: PropTypes.string\n};\n\nconst Versions = ({\n  installedVersion,\n  versions,\n  reloadPage\n}) => {\n  const [channelsFilter, setChannelsFilter] = useState(new Set(['stable']));\n  const [dhisVersionFilter, setDhisVersionFilter] = useState('');\n  const installSuccessAlert = useAlert(i18n.t('App installed successfully'), {\n    success: true\n  });\n  const installErrorAlert = useAlert(({\n    error\n  }) => i18n.t('Failed to install app: {{errorMessage}}', {\n    errorMessage: error.message,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const {\n    apiVersion\n  } = useConfig();\n  const {\n    installVersion\n  } = useApi();\n  const latestDhisVersion = \"2.\".concat(apiVersion);\n  const dhisVersions = [latestDhisVersion, \"2.\".concat(apiVersion - 1), \"2.\".concat(apiVersion - 2)];\n  const dhisVersionFilterSemver = semver.coerce(dhisVersionFilter);\n\n  const satisfiesDhisVersion = version => {\n    const {\n      minDhisVersion: min,\n      maxDhisVersion: max\n    } = version;\n\n    if (!dhisVersionFilter || !min && !max) {\n      return true;\n    } else if (min && max) {\n      const range = new semver.Range(\"\".concat(min, \" - \").concat(max));\n      return semver.satisfies(dhisVersionFilterSemver, range);\n    } else if (!min && max) {\n      const range = new semver.Range(\"<=\".concat(max));\n      return semver.satisfies(dhisVersionFilterSemver, range);\n    } else if (min && !max) {\n      const range = new semver.Range(\">=\".concat(min));\n      return semver.satisfies(dhisVersionFilterSemver, range);\n    }\n  };\n\n  const filteredVersions = versions.filter(version => channelsFilter.has(version.channel)).filter(satisfiesDhisVersion);\n\n  const handleVersionInstall = async version => {\n    try {\n      await installVersion(version.id);\n      installSuccessAlert.show();\n      reloadPage();\n    } catch (error) {\n      installErrorAlert.show({\n        error\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.versionsContainer\n  }, /*#__PURE__*/React.createElement(Filters, {\n    versions: versions,\n    dhisVersions: dhisVersions,\n    channelsFilter: channelsFilter,\n    setChannelsFilter: setChannelsFilter,\n    dhisVersionFilter: dhisVersionFilter,\n    setDhisVersionFilter: setDhisVersionFilter\n  }), /*#__PURE__*/React.createElement(VersionsTable, {\n    installedVersion: installedVersion,\n    versions: filteredVersions,\n    onVersionInstall: handleVersionInstall\n  }));\n};\n\nVersions.propTypes = {\n  reloadPage: PropTypes.func.isRequired,\n  versions: PropTypes.array.isRequired,\n  installedVersion: PropTypes.string\n};\nexport default Versions;","import { useAlert, useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button, Card, Divider, NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport moment from 'moment';\nimport React, { useState } from 'react';\nimport { useApi } from '../../api';\nimport { coreApps } from '../../core-apps';\nimport getLatestVersion from '../../get-latest-version';\nimport { channelToDisplayName } from '../CustomAppDetails/channel-to-display-name';\nimport styles from '../CustomAppDetails/CustomAppDetails.module.css';\nimport Versions from '../CustomAppDetails/Versions';\n\nconst ManageInstalledVersion = ({\n  installedApp,\n  versions,\n  reloadPage\n}) => {\n  const {\n    installVersion,\n    uninstallApp\n  } = useApi();\n  const successAlert = useAlert(({\n    message\n  }) => message, {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    message\n  }) => message, {\n    critical: true\n  });\n  const latestVersion = getLatestVersion(versions);\n\n  const handleUpdate = async () => {\n    try {\n      await installVersion(latestVersion.id);\n      successAlert.show({\n        message: i18n.t('App uninstalled successfully')\n      });\n      reloadPage();\n    } catch (error) {\n      errorAlert.show({\n        message: i18n.t('Failed to uninstall app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: null\n        })\n      });\n    }\n  };\n\n  const handleUninstall = async () => {\n    try {\n      await uninstallApp(installedApp.key);\n      successAlert.show({\n        message: i18n.t('App uninstalled successfully')\n      });\n      reloadPage();\n    } catch (error) {\n      errorAlert.show({\n        message: i18n.t('Failed to uninstall app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: null\n        })\n      });\n    }\n  };\n\n  const renderVersionRange = ({\n    minDhisVersion: min,\n    maxDhisVersion: max\n  }) => {\n    if (min && max) {\n      if (min === max) {\n        return \"\".concat(min);\n      }\n\n      return \"\".concat(min, \"\\u2013\").concat(max);\n    } else if (min && !max) {\n      return i18n.t('{{minDhisVersion}} and above', {\n        minDhisVersion: min\n      });\n    } else if (!min && max) {\n      return i18n.t('{{maxDhisVersion}} and below', {\n        maxDhisVersion: max\n      });\n    } else {\n      return i18n.t('all versions');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.manageInstalledVersion\n  }, latestVersion && installedApp.version !== latestVersion && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleUpdate\n  }, i18n.t('Update to latest version')), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.manageInstalledVersionDescription\n  }, i18n.t('{{channel}} release {{version}}. Compatible with DHIS2 {{versionRange}}', {\n    channel: channelToDisplayName[latestVersion.channel],\n    version: latestVersion.version,\n    versionRange: renderVersionRange(latestVersion)\n  }))), /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: handleUninstall\n  }, i18n.t('Uninstall')));\n};\n\nManageInstalledVersion.propTypes = {\n  reloadPage: PropTypes.func.isRequired,\n  versions: PropTypes.array.isRequired,\n  installedApp: PropTypes.object\n};\n\nconst Metadata = ({\n  installedVersion,\n  versions\n}) => {\n  const relativeTime = datetime => moment(datetime).fromNow();\n\n  versions = versions.sort((a, b) => a.created - b.created);\n  const latestVersion = getLatestVersion(versions);\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.metadataList\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('Version {{version}}', {\n    version: installedVersion || latestVersion.version\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('Last updated {{relativeTime}}', {\n    relativeTime: relativeTime(versions[versions.length - 1].created)\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('First published {{relativeTime}}', {\n    relativeTime: relativeTime(versions[0].created)\n  })));\n};\n\nMetadata.propTypes = {\n  versions: PropTypes.array.isRequired,\n  installedVersion: PropTypes.string\n};\n\nconst Screenshots = ({\n  screenshots\n}) => {\n  const [currentScreenshotIndex, setCurrentScreenshotIndex] = useState(0);\n  const currentScreenshot = screenshots[currentScreenshotIndex];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.screenshots\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.currentScreenshot,\n    src: currentScreenshot\n  })), /*#__PURE__*/React.createElement(\"div\", null, screenshots.map((screenshot, index) => /*#__PURE__*/React.createElement(\"button\", {\n    key: index,\n    onClick: () => setCurrentScreenshotIndex(index),\n    className: styles.otherScreenshot + ' ' + (index === currentScreenshotIndex ? styles.otherScreenshotCurrent : '')\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: screenshot\n  })))));\n};\n\nScreenshots.propTypes = {\n  screenshots: PropTypes.array.isRequired\n};\nconst appsQuery = {\n  modules: {\n    resource: 'action::menu/getModules'\n  },\n  installedApps: {\n    resource: 'apps'\n  }\n};\nconst appHubQuery = {\n  app: {\n    resource: \"appHub/v1/apps\",\n    id: ({\n      appHubId\n    }) => appHubId\n  }\n};\nexport const AppDetails = ({\n  match\n}) => {\n  var _appHubResponse$data;\n\n  const {\n    appKey\n  } = match.params;\n  const appsResponse = useDataQuery(appsQuery);\n  const appHubResponse = useDataQuery(appHubQuery, {\n    lazy: true\n  });\n\n  if (appsResponse.error || appHubResponse.error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading app')\n    }, (appsResponse.error || appHubResponse.error).message);\n  }\n\n  if (appsResponse.loading || appHubResponse.loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const {\n    modules: {\n      modules\n    },\n    installedApps\n  } = appsResponse.data;\n  const coreApp = coreApps.find(app => app.key === appKey);\n  const app = installedApps.find(app => app.key === appKey) || coreApp;\n\n  if (!app) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading app')\n    }, i18n.t('App not found'));\n  } // XXX\n\n\n  if (app.bundled && !app.app_hub_id && app.name === 'App Management') {\n    app.app_hub_id = '28823170-1203-46d1-81d5-eea67abae41c';\n  }\n\n  const module = modules.find(app => app.name === \"dhis-web-\".concat(appKey)); // If the app is a core app, then `module.displayName` should contain its translated name\n\n  if (coreApp && module) {\n    app.name = module.displayName;\n  }\n\n  if (app.app_hub_id && !appHubResponse.called) {\n    appHubResponse.refetch({\n      appHubId: app.app_hub_id\n    });\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const appHubApp = (_appHubResponse$data = appHubResponse.data) === null || _appHubResponse$data === void 0 ? void 0 : _appHubResponse$data.app;\n  const screenshots = appHubApp === null || appHubApp === void 0 ? void 0 : appHubApp.images.filter(i => !i.logo).map(i => i.imageUrl);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.appCard\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.headerName\n  }, app.name), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.headerDeveloper\n  }, i18n.t('by {{developer}}', {\n    developer: app.developer.company || app.developer.name,\n    context: 'developer of application'\n  }))), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: [styles.section, styles.mainSection].join(' ')\n  }, appHubApp && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('About this app')), /*#__PURE__*/React.createElement(\"p\", null, appHubApp.description)), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ManageInstalledVersion, {\n    installedApp: app,\n    versions: (appHubApp === null || appHubApp === void 0 ? void 0 : appHubApp.versions) || [],\n    reloadPage: appsResponse.refetch\n  }), appHubApp && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('Additional information')), /*#__PURE__*/React.createElement(Metadata, {\n    installedVersion: app.version,\n    versions: appHubApp.versions\n  })))), (screenshots === null || screenshots === void 0 ? void 0 : screenshots.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('Screenshots')), /*#__PURE__*/React.createElement(Screenshots, {\n    screenshots: screenshots\n  }))), appHubApp && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('All versions of this application')), /*#__PURE__*/React.createElement(Versions, {\n    installedVersion: app.version,\n    versions: appHubApp.versions,\n    reloadPage: appsResponse.refetch\n  }))));\n};\nAppDetails.propTypes = {\n  match: PropTypes.object.isRequired\n};","import { PropTypes } from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './AppIcon.module.css';\n\nconst getIconSrc = app => {\n  const iconSize = ['128', '48', '16'].find(iconSize => iconSize in app.icons);\n\n  if (iconSize) {\n    return \"\".concat(app.baseUrl, \"/\").concat(app.icons[iconSize]);\n  }\n\n  return null;\n};\n\nconst FallbackIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 72 72\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  fill: \"#f3f5f7\",\n  height: \"72\",\n  rx: \"10.5\",\n  width: \"72\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m60 52.5v3c0 2.3965213-1.8733799 4.3554913-4.2355908 4.492361l-.2644092.007639h-3v-3h3c.7692538 0 1.4032607-.5790603 1.4899084-1.3250683l.0100916-.1749317v-3zm-45 0v3l.0100916.1749317c.0866477.746008.7206546 1.3250683 1.4899084 1.3250683h3v3h-3l-.2644092-.007639c-2.3622109-.1368697-4.2355908-2.0958397-4.2355908-4.492361v-3zm18 4.5v3h-7.5v-3zm13.5 0v3h-7.5v-3zm-31.5-18v7.5h-3v-7.5zm45 0v7.5h-3v-7.5zm-45-13.5v7.5h-3v-7.5zm45 0v7.5h-3v-7.5zm-40.5-13.5v3h-3c-.7692538 0-1.4032607.5790603-1.4899084 1.3250683l-.0100916.1749317v3h-3v-3c0-2.3965213 1.8733799-4.3554913 4.2355908-4.492361l.2644092-.007639zm36 0 .2644092.007639c2.3622109.1368697 4.2355908 2.0958397 4.2355908 4.492361v3h-3v-3l-.0100916-.1749317c-.0866477-.746008-.7206546-1.3250683-1.4899084-1.3250683h-3v-3zm-22.5 0v3h-7.5v-3zm13.5 0v3h-7.5v-3z\",\n  fill: \"#c2ccd6\",\n  fillRule: \"nonzero\"\n})));\n\nconst AppIcon = ({\n  app\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.appIcon\n}, getIconSrc(app) ? /*#__PURE__*/React.createElement(\"img\", {\n  src: getIconSrc(app)\n}) : /*#__PURE__*/React.createElement(FallbackIcon, null));\n\nAppIcon.propTypes = {\n  app: PropTypes.object.isRequired\n};\nexport default AppIcon;","import i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { InputField } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParam, StringParam, withDefault } from 'use-query-params';\nimport AppIcon from './AppIcon';\nimport styles from './AppList.module.css';\n\nconst AppCards = ({\n  apps\n}) => {\n  const history = useHistory();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.appCards\n  }, apps.map(app => {\n    var _app$developer, _app$developer2;\n\n    return /*#__PURE__*/React.createElement(\"button\", {\n      key: app.short_name,\n      className: styles.appCard,\n      onClick: () => history.push(\"/installed_app/\".concat(app.key))\n    }, /*#__PURE__*/React.createElement(AppIcon, {\n      app: app\n    }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n      className: styles.appCardName\n    }, app.name), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.appCardMetadata\n    }, ((_app$developer = app.developer) === null || _app$developer === void 0 ? void 0 : _app$developer.company) || ((_app$developer2 = app.developer) === null || _app$developer2 === void 0 ? void 0 : _app$developer2.name)), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.appCardMetadata\n    }, app.version && \"Version \".concat(app.version))));\n  }));\n};\n\nAppCards.propTypes = {\n  apps: PropTypes.array.isRequired\n};\n\nconst AppsWithUpdates = ({\n  label,\n  apps\n}) => {\n  if (apps.length === 0) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.appsWithUpdates\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.header\n  }, label), /*#__PURE__*/React.createElement(AppCards, {\n    apps: apps\n  }));\n};\n\nAppsWithUpdates.propTypes = {\n  apps: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\n\nconst AllApps = ({\n  label,\n  apps\n}) => {\n  if (apps.length === 0) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      className: styles.header\n    }, i18n.t('No apps found')), /*#__PURE__*/React.createElement(\"p\", null, \"No apps match your criteria\"));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.header\n  }, label), /*#__PURE__*/React.createElement(AppCards, {\n    apps: apps\n  }));\n};\n\nAllApps.propTypes = {\n  apps: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\n\nconst AppList = ({\n  apps,\n  appsWithUpdates,\n  updatesAvailableLabel,\n  allAppsLabel,\n  searchLabel\n}) => {\n  const [query, setQuery] = useQueryParam('query', withDefault(StringParam, ''));\n\n  const handleQueryChange = ({\n    value\n  }) => {\n    setQuery(value, 'replaceIn');\n  };\n\n  const searchFilter = app => !query || app.name.toLocaleLowerCase().includes(query.toLocaleLowerCase());\n\n  const filteredApps = apps.filter(searchFilter);\n  const filteredAppsWithUpdates = (appsWithUpdates || []).filter(searchFilter);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(InputField, {\n    className: styles.searchField,\n    value: query,\n    placeholder: searchLabel,\n    onChange: handleQueryChange\n  }), /*#__PURE__*/React.createElement(AppsWithUpdates, {\n    apps: filteredAppsWithUpdates,\n    label: updatesAvailableLabel\n  }), /*#__PURE__*/React.createElement(AllApps, {\n    apps: filteredApps,\n    label: allAppsLabel\n  }));\n};\n\nAppList.propTypes = {\n  allAppsLabel: PropTypes.string.isRequired,\n  searchLabel: PropTypes.string.isRequired,\n  updatesAvailableLabel: PropTypes.string.isRequired,\n  apps: PropTypes.array,\n  appsWithUpdates: PropTypes.array\n};\nexport default AppList;","import { useDataQuery, useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport { coreApps } from '../../core-apps';\nimport getLatestVersion from '../../get-latest-version';\nimport AppList from '../AppList';\nconst query = {\n  coreApps: {\n    resource: 'apps',\n    params: {\n      bundled: true\n    }\n  },\n  // TODO: Add ability to request certain app IDs to `/v2/apps` API and use\n  // that instead\n  appHub: {\n    resource: 'appHub/v1/apps'\n  },\n  modules: {\n    resource: 'action::menu/getModules'\n  }\n};\nexport const CoreApps = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Something went wrong whilst loading your core apps')\n    }, error.message);\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const overridenCoreApps = data.coreApps.filter(app => app.bundled);\n  const apps = coreApps.map(coreApp => {\n    const overridenApp = overridenCoreApps === null || overridenCoreApps === void 0 ? void 0 : overridenCoreApps.find(a => a.short_name === coreApp.short_name);\n\n    if (overridenApp) {\n      return overridenApp;\n    }\n\n    const module = data.modules.modules.find(m => m.name === \"dhis-web-\".concat(coreApp.short_name));\n    const iconUrl = module === null || module === void 0 ? void 0 : module.icon;\n    const icons = iconUrl ? {\n      48: iconUrl\n    } : {};\n    const name = (module === null || module === void 0 ? void 0 : module.displayName) || coreApp.name;\n    return { ...coreApp,\n      baseUrl: \"\".concat(baseUrl, \"/dhis-web-\").concat(coreApp.short_name),\n      name,\n      icons\n    };\n  }).map(app => ({ ...app,\n    appHub: app.app_hub_id && (data === null || data === void 0 ? void 0 : data.appHub.find(({\n      id\n    }) => id === app.app_hub_id))\n  }));\n  const appsWithUpdates = apps.filter(app => app.appHub && app.version !== getLatestVersion(app.appHub.versions));\n  return /*#__PURE__*/React.createElement(AppList, {\n    apps: apps,\n    appsWithUpdates: appsWithUpdates,\n    updatesAvailableLabel: i18n.t('Core apps with updates available'),\n    allAppsLabel: i18n.t('All core apps'),\n    searchLabel: i18n.t('Search core apps')\n  });\n};","import { useAlert, useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button, Card, Divider, NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport moment from 'moment';\nimport React, { useState } from 'react';\nimport { useApi } from '../../api';\nimport getLatestVersion from '../../get-latest-version';\nimport { channelToDisplayName } from './channel-to-display-name';\nimport styles from './CustomAppDetails.module.css';\nimport Versions from './Versions';\n\nconst ManageInstalledVersion = ({\n  installedApp,\n  versions,\n  reloadPage\n}) => {\n  const {\n    installVersion,\n    uninstallApp\n  } = useApi();\n  const successAlert = useAlert(({\n    message\n  }) => message, {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    message\n  }) => message, {\n    critical: true\n  });\n  const latestVersion = getLatestVersion(versions);\n\n  const handleUpdate = async () => {\n    try {\n      await installVersion(latestVersion.id);\n      successAlert.show({\n        message: i18n.t('App uninstalled successfully')\n      });\n      reloadPage();\n    } catch (error) {\n      errorAlert.show({\n        message: i18n.t('Failed to uninstall app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: null\n        })\n      });\n    }\n  };\n\n  const handleUninstall = async () => {\n    try {\n      await uninstallApp(installedApp.key);\n      successAlert.show({\n        message: i18n.t('App uninstalled successfully')\n      });\n      reloadPage();\n    } catch (error) {\n      errorAlert.show({\n        message: i18n.t('Failed to uninstall app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: null\n        })\n      });\n    }\n  };\n\n  const renderVersionRange = ({\n    minDhisVersion: min,\n    maxDhisVersion: max\n  }) => {\n    if (min && max) {\n      if (min === max) {\n        return \"\".concat(min);\n      }\n\n      return \"\".concat(min, \"\\u2013\").concat(max);\n    } else if (min && !max) {\n      return i18n.t('{{minDhisVersion}} and above', {\n        minDhisVersion: min\n      });\n    } else if (!min && max) {\n      return i18n.t('{{maxDhisVersion}} and below', {\n        maxDhisVersion: max\n      });\n    } else {\n      return i18n.t('all versions');\n    }\n  };\n\n  if (!installedApp) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.manageInstalledVersion\n  }, installedApp.version !== latestVersion && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleUpdate\n  }, i18n.t('Update to latest version')), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.manageInstalledVersionDescription\n  }, i18n.t('{{channel}} release {{version}}. Compatible with DHIS2 {{versionRange}}', {\n    channel: channelToDisplayName[latestVersion.channel],\n    version: latestVersion.version,\n    versionRange: renderVersionRange(latestVersion)\n  }))), installedApp.version && /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: handleUninstall\n  }, i18n.t('Uninstall')));\n};\n\nManageInstalledVersion.propTypes = {\n  reloadPage: PropTypes.func.isRequired,\n  versions: PropTypes.array.isRequired,\n  installedApp: PropTypes.object\n};\n\nconst Metadata = ({\n  installedVersion,\n  versions\n}) => {\n  const relativeTime = datetime => moment(datetime).fromNow();\n\n  versions = versions.sort((a, b) => a.created - b.created);\n  const latestVersion = getLatestVersion(versions);\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.metadataList\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('Version {{version}}', {\n    version: installedVersion || latestVersion.version\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('Last updated {{relativeTime}}', {\n    relativeTime: relativeTime(versions[versions.length - 1].created)\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('First published {{relativeTime}}', {\n    relativeTime: relativeTime(versions[0].created)\n  })));\n};\n\nMetadata.propTypes = {\n  versions: PropTypes.array.isRequired,\n  installedVersion: PropTypes.string\n};\n\nconst Screenshots = ({\n  screenshots\n}) => {\n  const [currentScreenshotIndex, setCurrentScreenshotIndex] = useState(0);\n  const currentScreenshot = screenshots[currentScreenshotIndex];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.screenshots\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.currentScreenshot,\n    src: currentScreenshot\n  })), /*#__PURE__*/React.createElement(\"div\", null, screenshots.map((screenshot, index) => /*#__PURE__*/React.createElement(\"button\", {\n    key: index,\n    onClick: () => setCurrentScreenshotIndex(index),\n    className: styles.otherScreenshot + ' ' + (index === currentScreenshotIndex ? styles.otherScreenshotCurrent : '')\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: screenshot\n  })))));\n};\n\nScreenshots.propTypes = {\n  screenshots: PropTypes.array.isRequired\n};\nconst query = {\n  app: {\n    resource: \"appHub/v1/apps\",\n    id: ({\n      appHubId\n    }) => appHubId\n  },\n  installedApps: {\n    resource: 'apps'\n  }\n};\n\nconst CustomAppDetails = ({\n  match\n}) => {\n  var _installedApp, _installedApp2;\n\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    variables: {\n      appHubId: match.params.appHubId\n    }\n  });\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading custom app')\n    }, error.message);\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const {\n    app,\n    installedApps\n  } = data;\n  const screenshots = app.images.filter(i => !i.logo).map(i => i.imageUrl);\n  let installedApp = installedApps.find(a => a.name === app.name && a.developer && (app.developer.organisation === (a.developer.company || a.developer.name) || app.developer.name === a.developer.name));\n\n  if (!installedApp && app.developer.organisation === 'DHIS2') {\n    installedApp = {\n      version: null\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.appCard\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.headerName\n  }, app.name), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.headerDeveloper\n  }, i18n.t('by {{developer}}', {\n    developer: app.developer.organisation || app.developer.name,\n    context: 'creator of AppHub application'\n  }))), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: [styles.section, styles.mainSection].join(' ')\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('About this app')), /*#__PURE__*/React.createElement(\"p\", null, app.description)), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ManageInstalledVersion, {\n    installedApp: installedApp,\n    versions: app.versions,\n    reloadPage: refetch\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('Additional information')), /*#__PURE__*/React.createElement(Metadata, {\n    installedVersion: (_installedApp = installedApp) === null || _installedApp === void 0 ? void 0 : _installedApp.version,\n    versions: app.versions\n  }))), screenshots.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('Screenshots')), /*#__PURE__*/React.createElement(Screenshots, {\n    screenshots: screenshots\n  }))) : null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('All versions of this application')), /*#__PURE__*/React.createElement(Versions, {\n    installedVersion: (_installedApp2 = installedApp) === null || _installedApp2 === void 0 ? void 0 : _installedApp2.version,\n    versions: app.versions,\n    reloadPage: refetch\n  })));\n};\n\nCustomAppDetails.propTypes = {\n  match: PropTypes.object.isRequired\n};\nexport default CustomAppDetails;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport getLatestVersion from '../../get-latest-version';\nimport AppList from '../AppList';\nconst query = {\n  customApps: {\n    resource: 'apps',\n    params: {\n      bundled: false\n    }\n  },\n  appHub: {\n    resource: 'appHub/v1/apps'\n  }\n};\n\nconst CustomApps = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n  const apps = data === null || data === void 0 ? void 0 : data.customApps.filter(app => !app.bundled).map(app => ({ ...app,\n    appHub: data.appHub.find(({\n      id,\n      name,\n      developer\n    }) => {\n      if (app.app_hub_id) {\n        return id === app.app_hub_id;\n      }\n\n      return name === app.name && app.developer && (developer.organisation === (app.developer.company || app.developer.name) || developer.name === app.developer.name);\n    })\n  }));\n  const appsWithUpdates = apps === null || apps === void 0 ? void 0 : apps.filter(app => app.appHub && getLatestVersion(app.appHub.versions) !== app.version);\n  return /*#__PURE__*/React.createElement(AppList, {\n    error: error,\n    loading: loading,\n    apps: apps,\n    appsWithUpdates: appsWithUpdates,\n    errorLabel: i18n.t('Something went wrong whilst loading your custom apps'),\n    updatesAvailableLabel: i18n.t('Custom apps with updates available'),\n    allAppsLabel: i18n.t('All installed custom apps'),\n    searchLabel: i18n.t('Search installed custom apps')\n  });\n};\n\nexport default CustomApps;","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport React, { useState, useRef } from 'react';\nimport { useApi } from '../../api';\nimport styles from './ManualInstall.module.css';\n\nconst UploadButton = () => {\n  const {\n    uploadApp\n  } = useApi();\n  const [isUploading, setIsUploading] = useState(false);\n  const successAlert = useAlert(i18n.t('App installed successfully'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Failed to install app: {{errorMessage}}', {\n    errorMessage: error.message,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const formEl = useRef(null);\n  const inputEl = useRef(null);\n\n  const handleClick = () => {\n    inputEl.current.click();\n  };\n\n  const handleUpload = async event => {\n    setIsUploading(true);\n\n    try {\n      await uploadApp(event.target.files[0]);\n      formEl.current.reset();\n      successAlert.show();\n    } catch (error) {\n      errorAlert.show({\n        error\n      });\n    }\n\n    setIsUploading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    className: styles.hiddenForm,\n    ref: formEl\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"application/zip\",\n    ref: inputEl,\n    onChange: handleUpload\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    className: styles.uploadBtn,\n    onClick: handleClick,\n    disabled: isUploading\n  }, isUploading ? i18n.t('Uploading...') : i18n.t('Upload an app to install')));\n};\n\nconst ManualInstall = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n  className: styles.header\n}, i18n.t('Manually install an app')), /*#__PURE__*/React.createElement(\"p\", {\n  className: styles.warning\n}, i18n.t('Installed apps have access to your DHIS2 data and metadata. Make sure you trust an app before installing it.')), /*#__PURE__*/React.createElement(UploadButton, null));\n\nexport default ManualInstall;","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Menu, MenuItem } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport styles from './Sidebar.module.css';\n\nconst useIsItemActive = (path, exactMatch) => {\n  const routeMatch = useRouteMatch(path);\n  if (!routeMatch) return false;\n  if (exactMatch) return routeMatch.isExact;\n  return true;\n};\n\nconst SidebarItem = ({\n  label,\n  path,\n  exactMatch = false\n}) => {\n  const history = useHistory();\n  const isActive = useIsItemActive(path, exactMatch);\n\n  const navigateToPath = () => history.push(path);\n\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: styles.sidebarItem,\n    onClick: navigateToPath,\n    active: isActive,\n    label: label\n  });\n};\n\nSidebarItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  exactMatch: PropTypes.bool\n};\n\nconst showCoreApps = ({\n  minor,\n  patch\n}) => minor > 35 || minor == 35 && patch >= 2;\n\nconst Sidebar = () => /*#__PURE__*/React.createElement(Menu, null, showCoreApps(useConfig().serverVersion) ? /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('Preinstalled core apps'),\n  path: \"/\",\n  exactMatch: true\n}) : null, /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('Custom apps'),\n  path: \"/custom-apps\"\n}), /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('Manual install'),\n  path: \"/manual-install\"\n}));\n\nexport default Sidebar;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport csTranslations from './cs/translations.json';\nimport enTranslations from './en/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { CssVariables } from '@dhis2/ui';\nimport React from 'react';\nimport { HashRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport styles from './App.module.css';\nimport { AppDetails } from './components/AppDetails/AppDetails';\nimport { CoreApps } from './components/CoreApps/CoreApps';\nimport CustomAppDetails from './components/CustomAppDetails';\nimport CustomApps from './components/CustomApps';\nimport ManualInstall from './components/ManualInstall';\nimport Sidebar from './components/Sidebar';\nimport './locales';\n\nconst App = () => /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(QueryParamProvider, {\n  ReactRouterRoute: Route,\n  stringifyOptions: {\n    skipEmptyString: true\n  }\n}, /*#__PURE__*/React.createElement(CssVariables, {\n  spacers: true,\n  colors: true\n}), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.container\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.sidebar\n}, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"main\", {\n  className: styles.content\n}, /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: CoreApps\n}), /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/custom-apps\",\n  component: CustomApps\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/installed_app/:appKey\",\n  component: AppDetails\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/app/:appHubId\",\n  component: CustomAppDetails\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/manual-install\",\n  component: ManualInstall\n}), /*#__PURE__*/React.createElement(Redirect, {\n  from: \"*\",\n  to: \"/\"\n}))))));\n\nexport default App;"],"sourceRoot":""}