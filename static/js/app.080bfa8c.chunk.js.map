{"version":3,"sources":["D2App/stores/appHub.store.js","D2App/stores/installedApp.store.js","D2App/actions.js","D2App/theme.js","D2App/components/AppHub.component.js","D2App/latest-app-version.js","D2App/components/AppList.component.js","D2App/components/SelfUpdateNoticeBox.component.js","D2App/components/App.component.js","D2App/locales/index.js","D2App/AppWrapper.js"],"names":["store","Store","create","getAppFromVersionId","versionId","i","getState","apps","length","app","j","versions","id","version","getAppFromKey","appKey","key","debug","Debug","actions","installApp","Action","uninstallApp","refreshApps","appInstalled","loadAppHub","installAppVersion","showSnackbarMessage","wrapData","data","Array","isArray","subscribe","params","zipFile","progressCallback","getD2","then","d2","system","uploadApp","reloadApps","installedAppHub","setState","i18n","t","name","substring","lastIndexOf","complete","catch","err","message","concat","log","error","async","baseUrl","Api","getApi","fetchOptions","credentials","headers","response","fetch","json","replace","getDhisVersion","appHubStore","Object","assign","appHubState","installing","uid","api","Promise","resolve","reject","post","join","dataType","appHubState2","theme","spacing","Spacing","fontFamily","palette","primary1Color","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","grey500","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","appTheme","style","sideBar","backgroundColor","backgroundColorItem","backgroundColorItemActive","textColorActive","borderStyle","forms","minWidth","maxWidth","createAppTheme","AppHub","React","Component","constructor","props","super","this","state","undefined","UNSAFE_componentWillMount","appHub","renderApps","styles","card","width","float","marginRight","marginBottom","cardTitle","background","fontWeight","cardTitleSubtitle","color","fontSize","overflowX","overflowY","whiteSpace","textOverflow","cardText","borderTop","borderBottom","height","textAlign","button","marginLeft","flex","display","flexWrap","avatar","createElement","Avatar","AppTheme","rawTheme","icon","FontIcon","className","map","Card","CardHeader","title","subtitle","developer","organisation","titleColor","subtitleStyle","CardText","description","CardActions","FlatButton","primary","onClick","label","render","loadingMaskContainer","position","left","top","right","bottom","zIndex","header","padding","marginTop","cardTitleText","paddingTop","borderRadius","clear","LoadingMask","defaultProps","parseVersion","semver","clean","latestVersion","forEach","candidate","a","b","gt","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","appTypeHeaders","bundled_app","dashboard_widget","tracker_dashboard_widget","resource","appTypeMissing","wrapper","container","paddingBottom","fab","fabAnim","noApps","appName","appLink","textDecoration","appActions","appButtons","appIcon","coreAppLabel","AppItem","appVersions","_app$icons","latestAppVersion","needsUpdate","handleUpdate","event","stopPropagation","toPromise","setTimeout","location","reload","moreIcon","IconButton","rightIconButton","IconMenu","iconButtonElement","MenuItem","icons","src","primaryText","Chip","_","e","dense","secondaryText","bundled","ListItem","window","open","launchUrl","leftAvatar","AppList","context","fileInput","click","target","files","uploadProgress","appHubData","find","appHubApp","uploading","componentDidMount","form","reset","renderInstalledApps","appTypeFilter","toLocaleLowerCase","appList","installedApps","filter","appType","List","folderName","renderUploadButton","renderEmptyList","showUpload","FloatingActionButton","uploadAction","ref","visibility","type","r","onChange","upload","SelfUpdateNoticeBox","appManagementApp","NoticeBox","Button","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","source","getOwnPropertyDescriptors","defineProperties","progress","margin","paddingRight","snackbar","menuLabel","modulesQuery","modules","App","sidebar","clearSearchBox","section","appSearch","p","text","toLowerCase","indexOf","sort","localeCompare","appSearchText","lastUpdate","getChildContext","subscriptions","Date","setSection","wrapActionData","componentWillUnmount","subscription","dispose","renderUploadProgress","LinearProgress","mode","renderInstallProgress","CircularProgress","renderSection","toString","toUpperCase","transitionUnmount","unmountSection","renderSearchResults","appsByType","reduce","types","prototype","hasOwnProperty","call","entries","sections","Sidebar","currentSection","onChangeSection","showSearchField","onChangeSearchText","search","Snackbar","autoHideDuration","onRequestClose","closeSnackbar","DataQuery","query","bundledApps","short_name","displayName","childContextTypes","PropTypes","namespace","addResources","arTranslations","csTranslations","enTranslations","frTranslations","idTranslations","nbTranslations","ruTranslations","svTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","AppWrapper","useD2","onInitialized","MuiThemeProvider"],"mappings":"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","file":"static/js/app.080bfa8c.chunk.js","sourcesContent":["import Store from 'd2-ui/lib/store/Store';\nconst store = Store.create();\n\nfunction getAppFromVersionId(versionId) {\n  for (let i = 0; i < store.getState().apps.length; i++) {\n    const app = store.getState().apps[i];\n\n    for (let j = 0; j < app.versions.length; j++) {\n      if (app.versions[j].id === versionId) {\n        app.version = app.versions[j];\n        return app;\n      }\n    }\n  }\n\n  return null;\n}\n\nstore.getAppFromVersionId = getAppFromVersionId;\nexport default store;","import Store from 'd2-ui/lib/store/Store';\nconst store = Store.create();\n\nstore.getAppFromKey = appKey => {\n  const apps = store.getState();\n\n  for (let i = 0; i < apps.length; i++) {\n    if (apps[i].key === appKey) {\n      return apps[i];\n    }\n  }\n\n  return null;\n};\n\nexport default store;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport Debug from 'debug';\nimport log from 'loglevel';\nimport appHubStore from './stores/appHub.store';\nimport installedAppHub from './stores/installedApp.store';\nconst debug = Debug('app-management-app:frontend:client');\nconst actions = {\n  // App management actions\n  installApp: Action.create('Install App'),\n  uninstallApp: Action.create('Uninstall App'),\n  refreshApps: Action.create('Refresh Apps'),\n  appInstalled: Action.create('An app was installed'),\n  // App store actions\n  loadAppHub: Action.create('Load DHIS2 App Hub'),\n  installAppVersion: Action.create('Install App Version from DHIS2 App Hub'),\n  // Snackbar\n  showSnackbarMessage: Action.create('Show Snackbar message')\n};\nexport const wrapData = data => Array.isArray(data) ? data : [data];\n/*\n * Install app from zip file\n */\n\nactions.installApp.subscribe(params => {\n  const [zipFile, progressCallback] = wrapData(params.data);\n  getD2().then(d2 => {\n    d2.system.uploadApp(zipFile, progressCallback).then(() => d2.system.reloadApps()).then(apps => {\n      installedAppHub.setState(apps);\n      actions.showSnackbarMessage(i18n.t('App installed successfully'));\n      actions.appInstalled(zipFile.name.substring(0, zipFile.name.lastIndexOf('.')));\n      actions.refreshApps();\n      params.complete();\n    }).catch(err => {\n      let message = i18n.t('Failed to install app');\n\n      if (err.message) {\n        message += \": \".concat(err.message);\n      }\n\n      actions.showSnackbarMessage(message);\n      log.error('Failed to install app:', err.message || err);\n      actions.refreshApps();\n    });\n  });\n});\n/*\n * Uninstall app\n */\n\nactions.uninstallApp.subscribe(params => {\n  const appKey = wrapData(params.data)[0];\n  getD2().then(d2 => {\n    d2.system.uninstallApp(appKey).then(() => {\n      actions.showSnackbarMessage(i18n.t('App removed successfully'));\n      actions.refreshApps();\n    });\n  });\n});\n/*\n * Refresh the list of installed apps\n */\n\nactions.refreshApps.subscribe(() => {\n  getD2().then(d2 => {\n    d2.system.reloadApps().then(apps => {\n      installedAppHub.setState(apps);\n    });\n  });\n});\n/*\n * Load the app hub\n */\n\nactions.loadAppHub.subscribe(async () => {\n  const d2 = await getD2();\n  const baseUrl = d2.Api.getApi().baseUrl;\n  debug(\"Got baseUrl: \".concat(baseUrl));\n  const fetchOptions = {\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  const getDhisVersion = async () => {\n    const response = await fetch(\"\".concat(baseUrl, \"/system/info\"), fetchOptions);\n    const json = await response.json(); //if we're running a dev version remove the snapshot suffix to just keep the dhis version\n\n    return json.version.replace('-SNAPSHOT', '');\n  };\n\n  const version = await getDhisVersion();\n  debug(\"Got dhis2 version: \".concat(version));\n  const response = await fetch(\"\".concat(baseUrl, \"/appHub/v1/apps?dhis_version=\").concat(version), fetchOptions);\n  const apps = await response.json();\n  appHubStore.setState(Object.assign(appHubStore.getState() || {}, {\n    apps\n  }));\n});\n/*\n * Install app version from the app hub\n */\n\nactions.installAppVersion.subscribe(params => {\n  const versionId = wrapData(params.data)[0];\n  const appHubState = appHubStore.getState();\n  appHubStore.setState(Object.assign(appHubState, {\n    installing: appHubState.installing ? appHubState.installing + 1 : 1\n  }));\n  getD2().then(d2 => {\n    actions.showSnackbarMessage(i18n.t('Installing app from the app hub...'));\n    installAppVersion(versionId, d2).then(() => d2.system.reloadApps()).then(apps => {\n      actions.showSnackbarMessage(i18n.t('App installed successfully'));\n      const appHubState2 = appHubStore.getState();\n      appHubStore.setState(Object.assign(appHubState2, {\n        installing: appHubState2.installing - 1\n      }));\n      installedAppHub.setState(apps);\n      params.complete(apps);\n    }).catch(err => {\n      actions.showSnackbarMessage(\"\".concat(i18n.t('Failed to install an app from the app hub'), \": \").concat(err.message));\n      appHubStore.setState(Object.assign(appHubStore.getState(), {\n        installing: appHubStore.getState().installing - 1\n      }));\n      log.error(err);\n    });\n  });\n});\n\nfunction installAppVersion(uid, d2) {\n  const api = d2.Api.getApi();\n  return new Promise((resolve, reject) => {\n    api.post(['appHub', uid].join('/'), '', {\n      dataType: 'text'\n    }).then(() => {\n      resolve();\n    }).catch(err => {\n      reject(err);\n    });\n  });\n}\n\nexport default actions;","import { blue700, blue100, orange500, grey100, grey500, darkBlack, white, grey400 } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport Spacing from 'material-ui/styles/spacing';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: '#276696',\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: grey500,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\n\nfunction createAppTheme(style) {\n  return {\n    sideBar: {\n      backgroundColor: '#F3F3F3',\n      backgroundColorItem: 'transparent',\n      backgroundColorItemActive: style.palette.accent2Color,\n      textColor: style.palette.textColor,\n      textColorActive: style.palette.primary1Color,\n      borderStyle: '1px solid #e1e1e1'\n    },\n    forms: {\n      minWidth: 350,\n      maxWidth: 900\n    }\n  };\n}\n\nconst muiTheme = getMuiTheme(theme);\nconst appTheme = createAppTheme(theme);\nexport default Object.assign({}, muiTheme, appTheme);","import i18n from '@dhis2/d2-i18n';\nimport LoadingMask from 'd2-ui/lib/loading-mask/LoadingMask.component';\nimport Avatar from 'material-ui/Avatar';\nimport { Card, CardActions, CardHeader, CardText } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport FontIcon from 'material-ui/FontIcon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport actions from '../actions';\nimport AppTheme from '../theme';\n\nclass AppHub extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      installing: undefined\n    };\n  }\n\n  UNSAFE_componentWillMount() {\n    if (!Array.isArray(this.props.appHub.apps)) {\n      actions.loadAppHub();\n    }\n  }\n\n  renderApps() {\n    const styles = {\n      card: {\n        width: 297,\n        float: 'left',\n        marginRight: '1rem',\n        marginBottom: '1rem'\n      },\n      cardTitle: {\n        background: '#5892BE',\n        fontWeight: 400\n      },\n      cardTitleSubtitle: {\n        color: '#CCDDEE',\n        fontWeight: 300,\n        fontSize: 13,\n        overflowX: 'hidden',\n        overflowY: 'hidden',\n        maxWidth: 205,\n        whiteSpace: 'nowrap',\n        textOverflow: 'ellipsis'\n      },\n      cardText: {\n        borderTop: '1px solid #c3c3c3',\n        borderBottom: '1px solid #c3c3c3',\n        height: 165,\n        overflowY: 'hidden'\n      },\n      actions: {\n        textAlign: 'right'\n      },\n      button: {\n        marginRight: 0,\n        marginLeft: 8\n      },\n      flex: {\n        display: 'flex',\n        flexWrap: 'wrap'\n      }\n    };\n    const avatar = /*#__PURE__*/React.createElement(Avatar, {\n      backgroundColor: AppTheme.rawTheme.palette.primary1Color,\n      icon: /*#__PURE__*/React.createElement(FontIcon, {\n        className: \"material-icons\"\n      }, \"folder\")\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.flex\n    }, this.props.appHub.apps.map(app => /*#__PURE__*/React.createElement(Card, {\n      style: styles.card,\n      key: app.name\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      title: app.name,\n      subtitle: \"\".concat(i18n.t('By'), \" \").concat(app.developer.organisation),\n      avatar: avatar,\n      style: styles.cardTitle,\n      titleColor: \"white\",\n      subtitleStyle: styles.cardTitleSubtitle\n    }), /*#__PURE__*/React.createElement(CardText, {\n      style: styles.cardText\n    }, app.description), /*#__PURE__*/React.createElement(CardActions, {\n      style: styles.actions\n    }, app.versions.map(version => {\n      const handleInstall = () => actions.installAppVersion(version.id);\n\n      return /*#__PURE__*/React.createElement(FlatButton, {\n        key: version.id,\n        style: styles.button,\n        primary: true,\n        onClick: handleInstall,\n        label: \"\".concat(i18n.t('Install'), \" v\").concat(version.version)\n      });\n    })))));\n  }\n\n  render() {\n    const styles = {\n      loadingMaskContainer: {\n        position: 'fixed',\n        left: 256,\n        top: '3rem',\n        right: 0,\n        bottom: 0,\n        zIndex: 1000\n      },\n      header: {\n        fontSize: 24,\n        fontWeight: 300,\n        color: AppTheme.rawTheme.palette.textColor,\n        padding: '24px 0 12px 16px'\n      },\n      card: {\n        marginTop: 8,\n        marginRight: '1rem'\n      },\n      cardTitle: {\n        background: '#5892BE'\n      },\n      cardTitleText: {\n        color: 'white',\n        fontSize: 28,\n        fontWeight: 300\n      },\n      apps: {\n        paddingTop: '1rem'\n      },\n      description: {\n        padding: '1rem',\n        color: 'gray',\n        borderRadius: 3,\n        clear: 'both',\n        fontWeight: 300\n      }\n    };\n    return Array.isArray(this.props.appHub.apps) ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, i18n.t('App Hub')), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.apps\n    }, this.renderApps())) : /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.loadingMaskContainer\n    }, /*#__PURE__*/React.createElement(LoadingMask, null));\n  }\n\n}\n\nAppHub.propTypes = {\n  appHub: PropTypes.object.isRequired\n};\nAppHub.defaultProps = {\n  appHub: {}\n};\nexport default AppHub;","import semver from 'semver';\nconst parseVersion = semver.clean;\n\nconst semverGt = (a, b) => {\n  if (parseVersion(a) === null || parseVersion(b) === null) {\n    return false;\n  }\n\n  return semver.gt(parseVersion(a), parseVersion(b));\n};\n\nexport default (versions => {\n  if (!versions) {\n    return null;\n  }\n\n  let latestVersion = versions[0];\n  versions.forEach(candidate => {\n    if (semverGt(candidate.version, latestVersion.version)) {\n      latestVersion = candidate;\n    }\n  });\n  return latestVersion;\n});","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { Chip } from '@dhis2/ui';\nimport Avatar from 'material-ui/Avatar';\nimport { Card, CardText } from 'material-ui/Card';\nimport FloatingActionButton from 'material-ui/FloatingActionButton';\nimport FontIcon from 'material-ui/FontIcon';\nimport IconButton from 'material-ui/IconButton';\nimport IconMenu from 'material-ui/IconMenu';\nimport { List, ListItem } from 'material-ui/List';\nimport MenuItem from 'material-ui/MenuItem';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport actions from '../actions';\nimport latestAppVersion from '../latest-app-version';\nimport AppTheme from '../theme';\nconst appTypeHeaders = {\n  bundled_app: 'Installed Bundled Apps',\n  app: 'Installed Standard Apps',\n  dashboard_widget: 'Installed Dashboard Apps',\n  tracker_dashboard_widget: 'Installed Tracker Dashboard Apps',\n  resource: 'Installed Resource Apps'\n};\nconst appTypeMissing = {\n  bundled_app: 'There are no bundled apps installed.',\n  app: 'There are no standard apps installed.',\n  dashboard_widget: 'There are no dashboard apps installed.',\n  tracker_dashboard_widget: 'There are no tracker dashboard apps installed.',\n  resource: 'There are no resource apps installed'\n};\nconst styles = {\n  wrapper: {\n    maxWidth: 750,\n    position: 'relative'\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  },\n  container: {\n    borderBottom: '1px solid #dddddd',\n    paddingBottom: 0,\n    marginBottom: 8\n  },\n  fab: {\n    position: 'absolute',\n    top: 45,\n    right: 32\n  },\n  fabAnim: {\n    float: 'right'\n  },\n  noApps: {\n    marginTop: 16,\n    padding: '16px 0 5px 16px',\n    fontWeight: 300,\n    fontSize: 15\n  },\n  app: {\n    borderTop: '1px solid #dddddd'\n  },\n  appName: {\n    padding: 16,\n    clear: 'both'\n  },\n  appLink: {\n    textDecoration: 'none'\n  },\n  appActions: {\n    display: 'inline-block',\n    float: 'right',\n    marginTop: -8,\n    marginRight: -16\n  },\n  appButtons: {\n    marginLeft: '1rem'\n  },\n  appIcon: {\n    borderRadius: 3\n  },\n  card: {\n    marginTop: 8,\n    marginRight: '1rem'\n  },\n  coreAppLabel: {\n    fontWeight: 'bold',\n    marginRight: '0.3em'\n  }\n};\n\nconst AppItem = ({\n  app,\n  appVersions\n}) => {\n  var _app$icons;\n\n  const latestVersion = latestAppVersion(appVersions);\n  const needsUpdate = latestVersion !== null && latestVersion.version != app.version;\n\n  const handleUpdate = async event => {\n    event.stopPropagation();\n    await actions.installAppVersion(latestVersion.id).toPromise();\n\n    if (app.name === 'App Management') {\n      setTimeout(() => location.reload(), 500);\n    }\n  };\n\n  const handleUninstall = () => actions.uninstallApp(app.key);\n\n  const handleOpen = () => window.open(app.launchUrl);\n\n  const moreIcon = /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\",\n    color: \"#808080\"\n  }, \"more_vert\"));\n  const rightIconButton = /*#__PURE__*/React.createElement(IconMenu, {\n    iconButtonElement: moreIcon\n  }, needsUpdate && /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleUpdate\n  }, \"Update to v\", latestVersion.version), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleUninstall\n  }, \"Uninstall\"));\n  const avatar = ((_app$icons = app.icons) === null || _app$icons === void 0 ? void 0 : _app$icons['48']) ? /*#__PURE__*/React.createElement(Avatar, {\n    style: styles.appIcon,\n    src: [app.baseUrl, app.icons['48']].join('/')\n  }) : /*#__PURE__*/React.createElement(Avatar, {\n    backgroundColor: AppTheme.rawTheme.palette.primary1Color,\n    icon: /*#__PURE__*/React.createElement(FontIcon, {\n      className: \"material-icons\"\n    }, \"folder\")\n  });\n  const primaryText = /*#__PURE__*/React.createElement(\"div\", null, app.name, needsUpdate && /*#__PURE__*/React.createElement(Chip, {\n    onClick: (_, e) => handleUpdate(e),\n    dense: true\n  }, \"Update to v\", latestVersion.version));\n  const secondaryText = /*#__PURE__*/React.createElement(\"div\", null, app.bundled && /*#__PURE__*/React.createElement(\"span\", {\n    style: styles.coreAppLabel\n  }, i18n.t('CORE APP')), app.version ? \"v\".concat(app.version) : null);\n  return /*#__PURE__*/React.createElement(ListItem, {\n    primaryText: primaryText,\n    secondaryText: secondaryText,\n    style: styles.app,\n    onClick: handleOpen,\n    leftAvatar: avatar,\n    rightIconButton: rightIconButton\n  });\n};\n\nAppItem.propTypes = {\n  app: PropTypes.object.isRequired,\n  appVersions: PropTypes.array\n};\n\nclass AppList extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    _defineProperty(this, \"uploadAction\", e => {\n      this.fileInput.click(e);\n    });\n\n    _defineProperty(this, \"upload\", e => {\n      actions.installApp(e.target.files[0], this.props.uploadProgress);\n    });\n\n    _defineProperty(this, \"appVersions\", app => {\n      if (!this.props.appHub.apps) {\n        return null;\n      }\n\n      const appHubData = this.props.appHub.apps.find(appHubApp => {\n        if (appHubApp.name === app.name) {\n          if (app.bundled) {\n            return appHubApp.developer.organisation === 'DHIS2';\n          }\n        }\n\n        return false;\n      });\n      return appHubData === null || appHubData === void 0 ? void 0 : appHubData.versions;\n    });\n\n    this.state = {\n      uploading: false\n    };\n  }\n\n  componentDidMount() {\n    actions.installApp.subscribe(() => {\n      if (this.form) {\n        this.form.reset();\n      }\n    });\n  }\n\n  renderInstalledApps() {\n    const label = this.props.appTypeFilter.toLocaleLowerCase();\n    const appList = this.props.installedApps.filter(app => !this.props.appTypeFilter || this.props.appTypeFilter === 'BUNDLED_APP' && app.bundled || app.appType === this.props.appTypeFilter);\n\n    if (appList.length > 0) {\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n        style: styles.header\n      }, i18n.t(appTypeHeaders[label])), /*#__PURE__*/React.createElement(Card, {\n        style: styles.card\n      }, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(List, {\n        style: styles.container\n      }, appList.map(app => /*#__PURE__*/React.createElement(AppItem, {\n        key: app.folderName,\n        app: app,\n        appVersions: this.appVersions(app)\n      }))))), this.renderUploadButton());\n    }\n\n    return this.renderEmptyList();\n  }\n\n  renderEmptyList() {\n    const label = this.props.appTypeFilter.toLocaleLowerCase();\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, i18n.t(appTypeHeaders[label])), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.noApps\n    }, i18n.t(appTypeMissing[label])), this.renderUploadButton());\n  }\n\n  renderUploadButton() {\n    if (!this.props.showUpload) {\n      return null;\n    }\n\n    const setFormRef = ref => {\n      this.form = ref;\n    };\n\n    const theref = r => {\n      this.fileInput = r;\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.fab\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.fabAnim,\n      className: \"fab\"\n    }, /*#__PURE__*/React.createElement(FloatingActionButton, {\n      onClick: this.uploadAction\n    }, /*#__PURE__*/React.createElement(FontIcon, {\n      className: \"material-icons\"\n    }, \"file_upload\")))), /*#__PURE__*/React.createElement(\"form\", {\n      ref: setFormRef,\n      style: {\n        visibility: 'hidden'\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      ref: theref,\n      onChange: this.upload\n    })));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.wrapper\n    }, this.renderInstalledApps());\n  }\n\n}\n\nAppList.propTypes = {\n  appHub: PropTypes.object.isRequired,\n  appTypeFilter: PropTypes.oneOf(['BUNDLED_APP', 'APP', 'DASHBOARD_WIDGET', 'TRACKER_DASHBOARD_WIDGET', 'RESOURCE']).isRequired,\n  installedApps: PropTypes.array.isRequired,\n  showUpload: PropTypes.bool.isRequired,\n  uploadProgress: PropTypes.func.isRequired\n};\nAppList.defaultProps = {\n  appTypeFilter: 'app'\n};\nexport default AppList;","/* global __VERSION__ */\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport actions from '../actions';\nimport latestAppVersion from '../latest-app-version';\nconst currentVersion = \"31.0.0\";\nconst appManagementAppOrg = 'DHIS2';\nconst appManagementAppName = 'App Management';\nexport const SelfUpdateNoticeBox = ({\n  appHub\n}) => {\n  if (!appHub.apps) return null;\n  const appManagementApp = appHub.apps.find(app => app.developer.organisation === appManagementAppOrg && app.name === appManagementAppName);\n  const latestVersion = latestAppVersion(appManagementApp === null || appManagementApp === void 0 ? void 0 : appManagementApp.versions);\n\n  if (!appManagementApp || !latestVersion || latestVersion != currentVersion) {\n    return null;\n  }\n\n  const upgradeSelf = async () => {\n    await actions.installAppVersion(latestVersion.id).toPromise();\n    setTimeout(() => location.reload(), 500);\n  };\n\n  return /*#__PURE__*/React.createElement(NoticeBox, {\n    title: i18n.t('A new version of App Management is available on the App Hub')\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: upgradeSelf\n  }, i18n.t('Update and reload app')));\n};\nSelfUpdateNoticeBox.propTypes = {\n  appHub: PropTypes.object.isRequired\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { DataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport Sidebar from 'd2-ui/lib/sidebar/Sidebar.component';\nimport { Card, CardText } from 'material-ui/Card';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport FontIcon from 'material-ui/FontIcon';\nimport LinearProgress from 'material-ui/LinearProgress';\nimport Snackbar from 'material-ui/Snackbar';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport actions, { wrapData as wrapActionData } from '../actions';\nimport appHubStore from '../stores/appHub.store';\nimport installedAppHub from '../stores/installedApp.store';\nimport AppTheme from '../theme';\nimport AppHub from './AppHub.component';\nimport AppList from './AppList.component';\nimport { SelfUpdateNoticeBox } from './SelfUpdateNoticeBox.component';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  },\n  noApps: {\n    marginTop: 16,\n    padding: '16px 0 5px 16px',\n    fontWeight: 300,\n    fontSize: 15\n  },\n  progress: {\n    margin: '16px 1rem 16px 0',\n    padding: 16,\n    maxWidth: 734\n  },\n  installing: {\n    marginRight: '1rem',\n    paddingRight: '1rem',\n    marginTop: 16,\n    padding: 16,\n    textAlign: 'center',\n    fontSize: 14,\n    fontWeight: 300,\n    maxWidth: 734\n  },\n  snackbar: {\n    right: 'initial'\n  },\n  menuLabel: {\n    position: 'relative',\n    top: -6,\n    marginLeft: 16\n  }\n};\nconst modulesQuery = {\n  modules: {\n    resource: 'action::menu/getModules'\n  }\n};\n\nclass App extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    _defineProperty(this, \"setSection\", key => {\n      if (this.sidebar) {\n        this.sidebar.clearSearchBox();\n      }\n\n      this.setState({\n        section: key,\n        appSearch: undefined\n      });\n    });\n\n    _defineProperty(this, \"progress\", p => {\n      if (p) {\n        if (p === 1) {\n          this.setState({\n            uploading: false,\n            progress: undefined\n          });\n        } else {\n          this.setState({\n            progress: p * 100\n          });\n        }\n      } else {\n        this.setState({\n          progress: undefined\n        });\n      }\n    });\n\n    _defineProperty(this, \"closeSnackbar\", () => {\n      this.setState({\n        snackbar: undefined\n      });\n    });\n\n    _defineProperty(this, \"showSnackbar\", message => {\n      this.setState({\n        snackbar: message\n      });\n    });\n\n    _defineProperty(this, \"search\", text => {\n      if (text.length > 0) {\n        this.setState({\n          appSearch: this.state.installedApps.filter(app => app.name.toLowerCase().indexOf(text.toLowerCase()) !== -1).sort((a, b) => a.appType.localeCompare(b.appType) || a.name.localeCompare(b.name)),\n          appSearchText: text\n        });\n      } else {\n        this.setState({\n          appSearch: undefined,\n          appSearchText: undefined\n        });\n      }\n    });\n\n    this.state = {\n      installedApps: [],\n      installing: false,\n      section: 'bundled_app',\n      uploading: false,\n      progress: undefined,\n      appHub: {},\n      lastUpdate: null\n    };\n  }\n\n  getChildContext() {\n    return {\n      d2: this.props.d2,\n      muiTheme: AppTheme\n    };\n  }\n\n  componentDidMount() {\n    this.subscriptions = [installedAppHub.subscribe(installedApps => {\n      this.setState({\n        installedApps,\n        lastUpdate: new Date()\n      });\n    }), appHubStore.subscribe(appHub => {\n      this.setState({\n        appHub,\n        installing: appHub.installing !== undefined && appHub.installing > 0\n      });\n    }), actions.installApp.subscribe(() => {\n      this.setState({\n        uploading: true\n      });\n    }), actions.appInstalled.subscribe(({\n      data\n    }) => {\n      this.setState({\n        uploading: false\n      });\n      this.setSection(installedAppHub.getAppFromKey(data).appType.toLowerCase() || 'app');\n    }), actions.refreshApps.subscribe(() => {\n      this.setState({\n        uploading: false\n      });\n    }), actions.showSnackbarMessage.subscribe(params => {\n      if (this.state.snackbar) {\n        this.setState({\n          snackbar: undefined\n        });\n        setTimeout(() => {\n          this.setState({\n            snackbar: params.data\n          });\n        }, 150);\n      } else {\n        this.setState({\n          snackbar: params.data\n        });\n      }\n    }), actions.installAppVersion.subscribe(({\n      data\n    }) => {\n      const app = appHubStore.getAppFromVersionId(wrapActionData(data)[0]);\n      this.setSection(app.appType && app.appType.toLowerCase() || 'app');\n    })];\n    actions.loadAppHub();\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach(subscription => {\n      subscription.dispose();\n    });\n  }\n\n  renderUploadProgress() {\n    if (this.state.uploading) {\n      return /*#__PURE__*/React.createElement(Card, {\n        style: styles.progress\n      }, /*#__PURE__*/React.createElement(CardText, null, i18n.t('Uploading...'), /*#__PURE__*/React.createElement(LinearProgress, {\n        mode: this.state.progress ? 'determinate' : 'indeterminate',\n        color: \"#6688AA\",\n        value: this.state.progress\n      })));\n    }\n\n    return null;\n  }\n\n  renderInstallProgress() {\n    if (this.state.installing) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: styles.installing\n      }, /*#__PURE__*/React.createElement(CircularProgress, {\n        mode: \"indeterminate\",\n        color: \"#6688AA\",\n        value: this.state.progress\n      }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), i18n.t('Installing...'));\n    }\n\n    return null;\n  }\n\n  renderSection({\n    key,\n    apps,\n    showUpload\n  }) {\n    if (key === 'store') {\n      return /*#__PURE__*/React.createElement(AppHub, {\n        appHub: this.state.appHub,\n        d2: this.props.d2\n      });\n    }\n\n    const filter = key && key.toString().toUpperCase() || 'APP';\n    return /*#__PURE__*/React.createElement(AppList, {\n      d2: this.props.d2,\n      installedApps: apps,\n      uploadProgress: this.progress,\n      transitionUnmount: this.state.unmountSection,\n      showUpload: showUpload && !this.state.uploading,\n      appHub: this.state.appHub,\n      appTypeFilter: filter\n    });\n  }\n\n  renderSearchResults() {\n    const appsByType = this.state.appSearch.reduce((types, app) => {\n      if (Object.prototype.hasOwnProperty.call(types, app.appType)) {\n        types[app.appType].push(app);\n      } else {\n        types[app.appType] = [app]; // eslint-disable-line\n      }\n\n      return types;\n    }, {});\n\n    if (Object.keys(appsByType).length) {\n      return Object.entries(appsByType).map(([type, apps], i) => /*#__PURE__*/React.createElement(\"div\", {\n        key: type\n      }, this.renderSection({\n        key: type,\n        apps,\n        showUpload: i === 0\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, i18n.t('No apps found')), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.noApps\n    }, i18n.t('No installed apps matched the search term'), \" \\\"\", this.state.appSearchText, \"\\\"\"));\n  }\n\n  render() {\n    const sections = [{\n      key: 'bundled_app',\n      icon: 'widgets',\n      label: i18n.t('Bundled Apps')\n    }, {\n      key: 'app',\n      icon: 'desktop_windows',\n      label: i18n.t('Standard Apps')\n    }, {\n      key: 'dashboard_widget',\n      icon: 'wallpaper',\n      label: i18n.t('Dashboard Apps')\n    }, {\n      key: 'tracker_dashboard_widget',\n      icon: 'supervisor_account',\n      label: i18n.t('Tracker Dashboard Apps')\n    }, {\n      key: 'resource',\n      icon: 'data_usage',\n      label: i18n.t('Resource Apps')\n    }, {\n      key: 'store',\n      icon: 'store',\n      label: i18n.t('App Hub')\n    }].map(section => ({\n      key: section.key,\n      label: section.label,\n      icon: /*#__PURE__*/React.createElement(FontIcon, {\n        className: \"material-icons\"\n      }, section.icon)\n    }));\n\n    const reffer = r => {\n      this.sidebar = r;\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\"\n    }, /*#__PURE__*/React.createElement(SelfUpdateNoticeBox, {\n      appHub: this.state.appHub\n    }), /*#__PURE__*/React.createElement(Sidebar, {\n      sections: sections,\n      currentSection: this.state.section,\n      onChangeSection: this.setSection,\n      showSearchField: true,\n      onChangeSearchText: this.search,\n      ref: reffer\n    }), /*#__PURE__*/React.createElement(Snackbar, {\n      message: this.state.snackbar || '',\n      autoHideDuration: 2500,\n      onRequestClose: this.closeSnackbar,\n      open: !!this.state.snackbar,\n      style: styles.snackbar\n    }), /*#__PURE__*/React.createElement(DataQuery, {\n      query: modulesQuery\n    }, ({\n      data\n    }) => {\n      const bundledApps = (data ? data.modules.modules : []).filter(app => !this.state.installedApps.find(a => a.bundled && a.short_name === app.short_name)).map(app => _objectSpread(_objectSpread({}, app), {}, {\n        name: app.displayName,\n        bundled: true\n      }));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-area\"\n      }, this.state.appSearch ? this.renderSearchResults() : this.renderSection({\n        key: this.state.section,\n        apps: [...bundledApps, ...this.state.installedApps],\n        showUpload: true\n      }), this.renderUploadProgress(), this.renderInstallProgress());\n    }));\n  }\n\n}\n\nApp.propTypes = {\n  d2: PropTypes.object.isRequired\n};\nApp.childContextTypes = {\n  d2: PropTypes.object,\n  muiTheme: PropTypes.object\n};\nexport default App;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport csTranslations from './cs/translations.json';\nimport enTranslations from './en/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport React from 'react';\nimport App from './components/App.component';\nimport installedAppHub from './stores/installedApp.store';\nimport theme from './theme';\nimport './locales';\nimport 'material-design-icons-iconfont/dist/material-design-icons.css';\nimport './scss/style.scss';\n\nconst AppWrapper = () => {\n  const {\n    d2\n  } = useD2({\n    onInitialized: d2 => {\n      installedAppHub.setState(d2.system.installedApps);\n    }\n  });\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: theme\n  }, /*#__PURE__*/React.createElement(App, {\n    d2: d2\n  }));\n};\n\nexport default AppWrapper;"],"sourceRoot":""}