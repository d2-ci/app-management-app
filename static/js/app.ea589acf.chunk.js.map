{"version":3,"sources":["D2App/stores/installedApp.store.js","D2App/theme.js","D2App/stores/appHub.store.js","D2App/actions.js","D2App/latest-app-version.js","D2App/components/AppList.component.js","D2App/components/AppHub.component.js","D2App/components/SelfUpdateNoticeBox.component.js","D2App/components/App.component.js","D2App/locales/index.js","D2App/AppWrapper.js"],"names":["store","Store","create","getAppFromKey","appKey","apps","getState","i","length","key","theme","spacing","Spacing","fontFamily","palette","primary1Color","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","grey500","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","appTheme","style","sideBar","backgroundColor","backgroundColorItem","backgroundColorItemActive","textColorActive","borderStyle","forms","minWidth","maxWidth","createAppTheme","Object","assign","getAppFromVersionId","versionId","app","j","versions","id","version","debug","Debug","actions","installApp","Action","uninstallApp","refreshApps","appInstalled","loadAppHub","installAppVersion","showSnackbarMessage","wrapData","data","Array","isArray","subscribe","params","zipFile","progressCallback","getD2","then","d2","system","uploadApp","reloadApps","installedAppHub","setState","i18n","t","name","substring","lastIndexOf","complete","catch","err","message","log","error","async","baseUrl","Api","getApi","fetchOptions","credentials","headers","response","fetch","json","replace","getDhisVersion","appHubStore","appHubState","installing","uid","api","Promise","resolve","reject","post","join","dataType","appHubState2","parseVersion","semver","clean","latestVersion","forEach","candidate","a","b","gt","appTypeHeaders","bundled_app","dashboard_widget","tracker_dashboard_widget","resource","appTypeMissing","styles","wrapper","position","header","fontSize","fontWeight","color","AppTheme","rawTheme","padding","container","borderBottom","paddingBottom","marginBottom","fab","top","right","fabAnim","float","noApps","marginTop","borderTop","appName","clear","appLink","textDecoration","appActions","display","marginRight","appButtons","marginLeft","appIcon","borderRadius","card","coreAppLabel","AppItem","appVersions","latestAppVersion","needsUpdate","handleUpdate","event","stopPropagation","toPromise","setTimeout","location","reload","moreIcon","className","rightIconButton","iconButtonElement","onClick","avatar","icons","src","icon","primaryText","_","e","dense","secondaryText","isBundledApp","List","window","open","launchUrl","leftAvatar","AppList","React","Component","constructor","props","context","super","uploadAction","this","fileInput","click","upload","target","files","uploadProgress","appHub","appHubData","find","appHubApp","developer","organisation","state","uploading","componentDidMount","form","reset","renderInstalledApps","label","appTypeFilter","toLocaleLowerCase","appList","installedApps","filter","appType","Card","map","folderName","renderUploadButton","renderEmptyList","showUpload","ref","visibility","type","r","onChange","render","defaultProps","AppHub","undefined","UNSAFE_componentWillMount","renderApps","width","cardTitle","background","cardTitleSubtitle","overflowX","overflowY","whiteSpace","textOverflow","cardText","height","textAlign","button","flex","flexWrap","title","subtitle","titleColor","subtitleStyle","description","primary","loadingMaskContainer","left","bottom","zIndex","cardTitleText","paddingTop","SelfUpdateNoticeBox","appManagementApp","progress","margin","paddingRight","snackbar","menuLabel","bundledAppsQuery","bundledApps","App","setSection","sidebar","clearSearchBox","section","appSearch","p","closeSnackbar","showSnackbar","search","text","toLowerCase","indexOf","sort","localeCompare","appSearchText","lastUpdate","getChildContext","subscriptions","Date","wrapActionData","componentWillUnmount","subscription","dispose","renderUploadProgress","mode","value","renderInstallProgress","renderSection","toString","toUpperCase","transitionUnmount","unmountSection","renderSearchResults","appsByType","reduce","types","prototype","hasOwnProperty","call","push","keys","entries","sections","currentSection","onChangeSection","showSearchField","onChangeSearchText","autoHideDuration","onRequestClose","query","modules","short_name","displayName","childContextTypes","PropTypes","object","addResources","arTranslations","csTranslations","enTranslations","frTranslations","idTranslations","nbTranslations","ruTranslations","svTranslations","uzTranslations","uz_CyrlTranslations","viTranslations","zhTranslations","zh_CNTranslations","AppWrapper","useD2","onInitialized"],"mappings":"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","file":"static/js/app.ea589acf.chunk.js","sourcesContent":["import Store from 'd2-ui/lib/store/Store';\nconst store = Store.create();\n\nstore.getAppFromKey = appKey => {\n  const apps = store.getState();\n\n  for (let i = 0; i < apps.length; i++) {\n    if (apps[i].key === appKey) {\n      return apps[i];\n    }\n  }\n\n  return null;\n};\n\nexport default store;","import Spacing from 'material-ui/styles/spacing';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport { blue700, blue100, orange500, grey100, grey500, darkBlack, white, grey400 } from 'material-ui/styles/colors';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: '#276696',\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: grey500,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\n\nfunction createAppTheme(style) {\n  return {\n    sideBar: {\n      backgroundColor: '#F3F3F3',\n      backgroundColorItem: 'transparent',\n      backgroundColorItemActive: style.palette.accent2Color,\n      textColor: style.palette.textColor,\n      textColorActive: style.palette.primary1Color,\n      borderStyle: '1px solid #e1e1e1'\n    },\n    forms: {\n      minWidth: 350,\n      maxWidth: 900\n    }\n  };\n}\n\nconst muiTheme = getMuiTheme(theme);\nconst appTheme = createAppTheme(theme);\nexport default Object.assign({}, muiTheme, appTheme);","import Store from 'd2-ui/lib/store/Store';\nconst store = Store.create();\n\nfunction getAppFromVersionId(versionId) {\n  for (let i = 0; i < store.getState().apps.length; i++) {\n    const app = store.getState().apps[i];\n\n    for (let j = 0; j < app.versions.length; j++) {\n      if (app.versions[j].id === versionId) {\n        app.version = app.versions[j];\n        return app;\n      }\n    }\n  }\n\n  return null;\n}\n\nstore.getAppFromVersionId = getAppFromVersionId;\nexport default store;","import Debug from 'debug';\nimport Action from 'd2-ui/lib/action/Action';\nimport { getInstance as getD2 } from 'd2';\nimport log from 'loglevel';\nimport appHubStore from './stores/appHub.store';\nimport installedAppHub from './stores/installedApp.store';\nimport i18n from '@dhis2/d2-i18n';\nconst debug = Debug('app-management-app:frontend:client');\nconst actions = {\n  // App management actions\n  installApp: Action.create('Install App'),\n  uninstallApp: Action.create('Uninstall App'),\n  refreshApps: Action.create('Refresh Apps'),\n  appInstalled: Action.create('An app was installed'),\n  // App store actions\n  loadAppHub: Action.create('Load DHIS2 App Hub'),\n  installAppVersion: Action.create('Install App Version from DHIS2 App Hub'),\n  // Snackbar\n  showSnackbarMessage: Action.create('Show Snackbar message')\n};\nexport const wrapData = data => Array.isArray(data) ? data : [data];\n/*\n * Install app from zip file\n */\n\nactions.installApp.subscribe(params => {\n  const [zipFile, progressCallback] = wrapData(params.data);\n  getD2().then(d2 => {\n    d2.system.uploadApp(zipFile, progressCallback).then(() => d2.system.reloadApps()).then(apps => {\n      installedAppHub.setState(apps);\n      actions.showSnackbarMessage(i18n.t('App installed successfully'));\n      actions.appInstalled(zipFile.name.substring(0, zipFile.name.lastIndexOf('.')));\n      actions.refreshApps();\n      params.complete();\n    }).catch(err => {\n      let message = i18n.t('Failed to install app');\n\n      if (err.message) {\n        message += `: ${err.message}`;\n      }\n\n      actions.showSnackbarMessage(message);\n      log.error('Failed to install app:', err.message || err);\n      actions.refreshApps();\n    });\n  });\n});\n/*\n * Uninstall app\n */\n\nactions.uninstallApp.subscribe(params => {\n  const appKey = wrapData(params.data)[0];\n  getD2().then(d2 => {\n    d2.system.uninstallApp(appKey).then(() => {\n      actions.showSnackbarMessage(i18n.t('App removed successfully'));\n      actions.refreshApps();\n    });\n  });\n});\n/*\n * Refresh the list of installed apps\n */\n\nactions.refreshApps.subscribe(() => {\n  getD2().then(d2 => {\n    d2.system.reloadApps().then(apps => {\n      installedAppHub.setState(apps);\n    });\n  });\n});\n/*\n * Load the app hub\n */\n\nactions.loadAppHub.subscribe(async () => {\n  const d2 = await getD2();\n  const baseUrl = d2.Api.getApi().baseUrl;\n  debug(`Got baseUrl: ${baseUrl}`);\n  const fetchOptions = {\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  const getDhisVersion = async () => {\n    const response = await fetch(`${baseUrl}/system/info`, fetchOptions);\n    const json = await response.json(); //if we're running a dev version remove the snapshot suffix to just keep the dhis version\n\n    return json.version.replace('-SNAPSHOT', '');\n  };\n\n  const version = await getDhisVersion();\n  debug(`Got dhis2 version: ${version}`);\n  const response = await fetch(`${baseUrl}/appHub/v1/apps?dhis_version=${version}`, fetchOptions);\n  const apps = await response.json();\n  appHubStore.setState(Object.assign(appHubStore.getState() || {}, {\n    apps\n  }));\n});\n/*\n * Install app version from the app hub\n */\n\nactions.installAppVersion.subscribe(params => {\n  const versionId = wrapData(params.data)[0];\n  const appHubState = appHubStore.getState();\n  appHubStore.setState(Object.assign(appHubState, {\n    installing: appHubState.installing ? appHubState.installing + 1 : 1\n  }));\n  getD2().then(d2 => {\n    actions.showSnackbarMessage(i18n.t('Installing app from the app hub...'));\n    installAppVersion(versionId, d2).then(() => d2.system.reloadApps()).then(apps => {\n      actions.showSnackbarMessage(i18n.t('App installed successfully'));\n      const appHubState2 = appHubStore.getState();\n      appHubStore.setState(Object.assign(appHubState2, {\n        installing: appHubState2.installing - 1\n      }));\n      installedAppHub.setState(apps);\n      params.complete(apps);\n    }).catch(err => {\n      actions.showSnackbarMessage(`${i18n.t('Failed to install an app from the app hub')}: ${err.message}`);\n      appHubStore.setState(Object.assign(appHubStore.getState(), {\n        installing: appHubStore.getState().installing - 1\n      }));\n      log.error(err);\n    });\n  });\n});\n\nfunction installAppVersion(uid, d2) {\n  const api = d2.Api.getApi();\n  return new Promise((resolve, reject) => {\n    api.post(['appHub', uid].join('/'), '', {\n      dataType: 'text'\n    }).then(() => {\n      resolve();\n    }).catch(err => {\n      reject(err);\n    });\n  });\n}\n\nexport default actions;","import semver from 'semver';\nconst parseVersion = semver.clean;\n\nconst semverGt = (a, b) => {\n  if (parseVersion(a) === null || parseVersion(b) === null) {\n    return false;\n  }\n\n  return semver.gt(parseVersion(a), parseVersion(b));\n};\n\nexport default (versions => {\n  if (!versions) {\n    return null;\n  }\n\n  let latestVersion = versions[0];\n  versions.forEach(candidate => {\n    if (semverGt(candidate.version, latestVersion.version)) {\n      latestVersion = candidate;\n    }\n  });\n  return latestVersion;\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from 'material-ui/Avatar';\nimport IconButton from 'material-ui/IconButton';\nimport IconMenu from 'material-ui/IconMenu';\nimport { List, ListItem } from 'material-ui/List';\nimport MenuItem from 'material-ui/MenuItem';\nimport { Card, CardText } from 'material-ui/Card';\nimport FloatingActionButton from 'material-ui/FloatingActionButton';\nimport FontIcon from 'material-ui/FontIcon';\nimport { Chip } from '@dhis2/ui';\nimport AppTheme from '../theme';\nimport actions from '../actions';\nimport latestAppVersion from '../latest-app-version';\nimport i18n from '@dhis2/d2-i18n';\nconst appTypeHeaders = {\n  bundled_app: 'Installed Bundled Apps',\n  app: 'Installed Standard Apps',\n  dashboard_widget: 'Installed Dashboard Apps',\n  tracker_dashboard_widget: 'Installed Tracker Dashboard Apps',\n  resource: 'Installed Resource Apps'\n};\nconst appTypeMissing = {\n  bundled_app: 'There are no bundled apps installed.',\n  app: 'There are no standard apps installed.',\n  dashboard_widget: 'There are no dashboard apps installed.',\n  tracker_dashboard_widget: 'There are no tracker dashboard apps installed.',\n  resource: 'There are no resource apps installed'\n};\nconst styles = {\n  wrapper: {\n    maxWidth: 750,\n    position: 'relative'\n  },\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  },\n  container: {\n    borderBottom: '1px solid #dddddd',\n    paddingBottom: 0,\n    marginBottom: 8\n  },\n  fab: {\n    position: 'absolute',\n    top: 45,\n    right: 32\n  },\n  fabAnim: {\n    float: 'right'\n  },\n  noApps: {\n    marginTop: 16,\n    padding: '16px 0 5px 16px',\n    fontWeight: 300,\n    fontSize: 15\n  },\n  app: {\n    borderTop: '1px solid #dddddd'\n  },\n  appName: {\n    padding: 16,\n    clear: 'both'\n  },\n  appLink: {\n    textDecoration: 'none'\n  },\n  appActions: {\n    display: 'inline-block',\n    float: 'right',\n    marginTop: -8,\n    marginRight: -16\n  },\n  appButtons: {\n    marginLeft: '1rem'\n  },\n  appIcon: {\n    borderRadius: 3\n  },\n  card: {\n    marginTop: 8,\n    marginRight: '1rem'\n  },\n  coreAppLabel: {\n    fontWeight: 'bold',\n    marginRight: '0.3em'\n  }\n};\n\nconst AppItem = ({\n  app,\n  appVersions\n}) => {\n  const latestVersion = latestAppVersion(appVersions);\n  const needsUpdate = latestVersion !== null && latestVersion.version != app.version;\n\n  const handleUpdate = async event => {\n    event.stopPropagation();\n    await actions.installAppVersion(latestVersion.id).toPromise();\n\n    if (app.name === 'App Management') {\n      setTimeout(() => location.reload(), 500);\n    }\n  };\n\n  const handleUninstall = () => actions.uninstallApp(app.key);\n\n  const handleOpen = () => window.open(app.launchUrl);\n\n  const moreIcon = <IconButton>\n            <FontIcon className=\"material-icons\" color=\"#808080\">\n                more_vert\n            </FontIcon>\n        </IconButton>;\n  const rightIconButton = <IconMenu iconButtonElement={moreIcon}>\n            {needsUpdate && <MenuItem onClick={handleUpdate}>\n                    Update to v{latestVersion.version}\n                </MenuItem>}\n            <MenuItem onClick={handleUninstall}>Uninstall</MenuItem>\n        </IconMenu>;\n  const avatar = app.icons?.['48'] ? <Avatar style={styles.appIcon} src={[app.baseUrl, app.icons['48']].join('/')} /> : <Avatar backgroundColor={AppTheme.rawTheme.palette.primary1Color} icon={<FontIcon className=\"material-icons\">folder</FontIcon>} />;\n  const primaryText = <div>\n            {app.name}\n            {needsUpdate && <Chip onClick={(_, e) => handleUpdate(e)} dense>\n                    Update to v{latestVersion.version}\n                </Chip>}\n        </div>;\n  const secondaryText = <div>\n            {app.isBundledApp && <span style={styles.coreAppLabel}>{i18n.t('CORE APP')}</span>}\n            {app.version ? `v${app.version}` : null}\n        </div>;\n  return <ListItem primaryText={primaryText} secondaryText={secondaryText} style={styles.app} onClick={handleOpen} leftAvatar={avatar} rightIconButton={rightIconButton} />;\n};\n\nAppItem.propTypes = {\n  app: PropTypes.object.isRequired,\n  appVersions: PropTypes.array\n};\n\nclass AppList extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      uploading: false\n    };\n  }\n\n  componentDidMount() {\n    actions.installApp.subscribe(() => {\n      if (this.form) {\n        this.form.reset();\n      }\n    });\n  }\n\n  uploadAction = e => {\n    this.fileInput.click(e);\n  };\n  upload = e => {\n    actions.installApp(e.target.files[0], this.props.uploadProgress);\n  };\n  appVersions = app => {\n    if (!this.props.appHub.apps) {\n      return null;\n    }\n\n    const appHubData = this.props.appHub.apps.find(appHubApp => {\n      if (appHubApp.name === app.name) {\n        if (app.isBundledApp) {\n          return appHubApp.developer.organisation === 'DHIS2';\n        }\n      }\n\n      return false;\n    });\n    return appHubData?.versions;\n  };\n\n  renderInstalledApps() {\n    const label = this.props.appTypeFilter.toLocaleLowerCase();\n    const appList = this.props.installedApps.filter(app => !this.props.appTypeFilter || this.props.appTypeFilter === 'BUNDLED_APP' && app.isBundledApp || app.appType === this.props.appTypeFilter);\n\n    if (appList.length > 0) {\n      return <div>\n                    <div style={styles.header}>\n                        {i18n.t(appTypeHeaders[label])}\n                    </div>\n                    <Card style={styles.card}>\n                        <CardText>\n                            <List style={styles.container}>\n                                {appList.map(app => <AppItem key={app.folderName} app={app} appVersions={this.appVersions(app)} />)}\n                            </List>\n                        </CardText>\n                    </Card>\n                    {this.renderUploadButton()}\n                </div>;\n    }\n\n    return this.renderEmptyList();\n  }\n\n  renderEmptyList() {\n    const label = this.props.appTypeFilter.toLocaleLowerCase();\n    return <div>\n                <div style={styles.header}>{i18n.t(appTypeHeaders[label])}</div>\n                <div style={styles.noApps}>{i18n.t(appTypeMissing[label])}</div>\n                {this.renderUploadButton()}\n            </div>;\n  }\n\n  renderUploadButton() {\n    if (!this.props.showUpload) {\n      return null;\n    }\n\n    const setFormRef = ref => {\n      this.form = ref;\n    };\n\n    const theref = r => {\n      this.fileInput = r;\n    };\n\n    return <div>\n                <div style={styles.fab}>\n                    <div style={styles.fabAnim} className=\"fab\">\n                        <FloatingActionButton onClick={this.uploadAction}>\n                            <FontIcon className=\"material-icons\">\n                                file_upload\n                            </FontIcon>\n                        </FloatingActionButton>\n                    </div>\n                </div>\n                <form ref={setFormRef} style={{\n        visibility: 'hidden'\n      }}>\n                    <input type=\"file\" ref={theref} onChange={this.upload} />\n                </form>\n            </div>;\n  }\n\n  render() {\n    return <div style={styles.wrapper}>{this.renderInstalledApps()}</div>;\n  }\n\n}\n\nAppList.propTypes = {\n  appHub: PropTypes.object.isRequired,\n  appTypeFilter: PropTypes.oneOf(['BUNDLED_APP', 'APP', 'DASHBOARD_WIDGET', 'TRACKER_DASHBOARD_WIDGET', 'RESOURCE']).isRequired,\n  installedApps: PropTypes.array.isRequired,\n  showUpload: PropTypes.bool.isRequired,\n  uploadProgress: PropTypes.func.isRequired\n};\nAppList.defaultProps = {\n  appTypeFilter: 'app'\n};\nexport default AppList;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, CardActions, CardHeader, CardText } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport FontIcon from 'material-ui/FontIcon';\nimport Avatar from 'material-ui/Avatar';\nimport LoadingMask from 'd2-ui/lib/loading-mask/LoadingMask.component';\nimport AppTheme from '../theme';\nimport actions from '../actions';\nimport i18n from '@dhis2/d2-i18n';\n\nclass AppHub extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      installing: undefined\n    };\n  }\n\n  UNSAFE_componentWillMount() {\n    if (!Array.isArray(this.props.appHub.apps)) {\n      actions.loadAppHub();\n    }\n  }\n\n  renderApps() {\n    const styles = {\n      card: {\n        width: 297,\n        float: 'left',\n        marginRight: '1rem',\n        marginBottom: '1rem'\n      },\n      cardTitle: {\n        background: '#5892BE',\n        fontWeight: 400\n      },\n      cardTitleSubtitle: {\n        color: '#CCDDEE',\n        fontWeight: 300,\n        fontSize: 13,\n        overflowX: 'hidden',\n        overflowY: 'hidden',\n        maxWidth: 205,\n        whiteSpace: 'nowrap',\n        textOverflow: 'ellipsis'\n      },\n      cardText: {\n        borderTop: '1px solid #c3c3c3',\n        borderBottom: '1px solid #c3c3c3',\n        height: 165,\n        overflowY: 'hidden'\n      },\n      actions: {\n        textAlign: 'right'\n      },\n      button: {\n        marginRight: 0,\n        marginLeft: 8\n      },\n      flex: {\n        display: 'flex',\n        flexWrap: 'wrap'\n      }\n    };\n    const avatar = <Avatar backgroundColor={AppTheme.rawTheme.palette.primary1Color} icon={<FontIcon className=\"material-icons\">folder</FontIcon>} />;\n    return <div style={styles.flex}>\n                {this.props.appHub.apps.map(app => <Card style={styles.card} key={app.name}>\n                        <CardHeader title={app.name} subtitle={`${i18n.t('By')} ${app.developer.organisation}`} avatar={avatar} style={styles.cardTitle} titleColor=\"white\" subtitleStyle={styles.cardTitleSubtitle} />\n                        <CardText style={styles.cardText}>\n                            {app.description}\n                        </CardText>\n                        <CardActions style={styles.actions}>\n                            {app.versions.map(version => {\n            const handleInstall = () => actions.installAppVersion(version.id);\n\n            return <FlatButton key={version.id} style={styles.button} primary onClick={handleInstall} label={`${i18n.t('Install')} v${version.version}`} />;\n          })}\n                        </CardActions>\n                    </Card>)}\n            </div>;\n  }\n\n  render() {\n    const styles = {\n      loadingMaskContainer: {\n        position: 'fixed',\n        left: 256,\n        top: '3rem',\n        right: 0,\n        bottom: 0,\n        zIndex: 1000\n      },\n      header: {\n        fontSize: 24,\n        fontWeight: 300,\n        color: AppTheme.rawTheme.palette.textColor,\n        padding: '24px 0 12px 16px'\n      },\n      card: {\n        marginTop: 8,\n        marginRight: '1rem'\n      },\n      cardTitle: {\n        background: '#5892BE'\n      },\n      cardTitleText: {\n        color: 'white',\n        fontSize: 28,\n        fontWeight: 300\n      },\n      apps: {\n        paddingTop: '1rem'\n      },\n      description: {\n        padding: '1rem',\n        color: 'gray',\n        borderRadius: 3,\n        clear: 'both',\n        fontWeight: 300\n      }\n    };\n    return Array.isArray(this.props.appHub.apps) ? <div>\n                <div style={styles.header}>{i18n.t('App Hub')}</div>\n                <div style={styles.apps}>{this.renderApps()}</div>\n            </div> : <div style={styles.loadingMaskContainer}>\n                <LoadingMask />\n            </div>;\n  }\n\n}\n\nAppHub.propTypes = {\n  appHub: PropTypes.object.isRequired\n};\nAppHub.defaultProps = {\n  appHub: {}\n};\nexport default AppHub;","/* global __VERSION__ */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { NoticeBox, Button } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport actions from '../actions';\nimport latestAppVersion from '../latest-app-version';\nconst currentVersion = \"31.0.0\";\nconst appManagementAppOrg = 'DHIS2';\nconst appManagementAppName = 'App Management';\n\nconst SelfUpdateNoticeBox = ({\n  appHub\n}) => {\n  if (!appHub.apps) return null;\n  const appManagementApp = appHub.apps.find(app => app.developer.organisation === appManagementAppOrg && app.name === appManagementAppName);\n  const latestVersion = latestAppVersion(appManagementApp?.versions);\n\n  if (!appManagementApp || !latestVersion || latestVersion != currentVersion) {\n    return null;\n  }\n\n  const upgradeSelf = async () => {\n    await actions.installAppVersion(latestVersion.id).toPromise();\n    setTimeout(() => location.reload(), 500);\n  };\n\n  return <NoticeBox title={i18n.t('A new version of App Management is available on the App Hub')}>\n            <Button onClick={upgradeSelf}>\n                {i18n.t('Update and reload app')}\n            </Button>\n        </NoticeBox>;\n};\n\nSelfUpdateNoticeBox.propTypes = {\n  appHub: PropTypes.object.isRequired\n};\nexport default SelfUpdateNoticeBox;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { DataQuery } from '@dhis2/app-runtime';\nimport Sidebar from 'd2-ui/lib/sidebar/Sidebar.component';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport LinearProgress from 'material-ui/LinearProgress';\nimport { Card, CardText } from 'material-ui/Card';\nimport Snackbar from 'material-ui/Snackbar';\nimport FontIcon from 'material-ui/FontIcon';\nimport AppList from './AppList.component';\nimport AppHub from './AppHub.component';\nimport SelfUpdateNoticeBox from './SelfUpdateNoticeBox.component';\nimport AppTheme from '../theme';\nimport actions, { wrapData as wrapActionData } from '../actions';\nimport appHubStore from '../stores/appHub.store';\nimport installedAppHub from '../stores/installedApp.store';\nimport i18n from '@dhis2/d2-i18n';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  },\n  noApps: {\n    marginTop: 16,\n    padding: '16px 0 5px 16px',\n    fontWeight: 300,\n    fontSize: 15\n  },\n  progress: {\n    margin: '16px 1rem 16px 0',\n    padding: 16,\n    maxWidth: 734\n  },\n  installing: {\n    marginRight: '1rem',\n    paddingRight: '1rem',\n    marginTop: 16,\n    padding: 16,\n    textAlign: 'center',\n    fontSize: 14,\n    fontWeight: 300,\n    maxWidth: 734\n  },\n  snackbar: {\n    // left: '2rem',\n    right: 'initial'\n  },\n  menuLabel: {\n    position: 'relative',\n    top: -6,\n    marginLeft: 16\n  }\n};\nconst bundledAppsQuery = {\n  bundledApps: {\n    resource: 'action::menu/getModules'\n  }\n};\n\nclass App extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      installedApps: [],\n      installing: false,\n      section: 'bundled_app',\n      uploading: false,\n      progress: undefined,\n      appHub: {},\n      lastUpdate: null\n    };\n  }\n\n  getChildContext() {\n    return {\n      d2: this.props.d2,\n      muiTheme: AppTheme\n    };\n  }\n\n  componentDidMount() {\n    this.subscriptions = [installedAppHub.subscribe(installedApps => {\n      this.setState({\n        installedApps,\n        lastUpdate: new Date()\n      });\n    }), appHubStore.subscribe(appHub => {\n      this.setState({\n        appHub,\n        installing: appHub.installing !== undefined && appHub.installing > 0\n      });\n    }), actions.installApp.subscribe(() => {\n      this.setState({\n        uploading: true\n      });\n    }), actions.appInstalled.subscribe(({\n      data\n    }) => {\n      this.setState({\n        uploading: false\n      });\n      this.setSection(installedAppHub.getAppFromKey(data).appType.toLowerCase() || 'app');\n    }), actions.refreshApps.subscribe(() => {\n      this.setState({\n        uploading: false\n      });\n    }), actions.showSnackbarMessage.subscribe(params => {\n      if (this.state.snackbar) {\n        this.setState({\n          snackbar: undefined\n        });\n        setTimeout(() => {\n          this.setState({\n            snackbar: params.data\n          });\n        }, 150);\n      } else {\n        this.setState({\n          snackbar: params.data\n        });\n      }\n    }), actions.installAppVersion.subscribe(({\n      data\n    }) => {\n      const app = appHubStore.getAppFromVersionId(wrapActionData(data)[0]);\n      this.setSection(app.appType && app.appType.toLowerCase() || 'app');\n    })];\n    actions.loadAppHub();\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach(subscription => {\n      subscription.dispose();\n    });\n  }\n\n  setSection = key => {\n    if (this.sidebar) {\n      this.sidebar.clearSearchBox();\n    }\n\n    this.setState({\n      section: key,\n      appSearch: undefined\n    });\n  };\n  progress = p => {\n    if (p) {\n      if (p === 1) {\n        this.setState({\n          uploading: false,\n          progress: undefined\n        });\n      } else {\n        this.setState({\n          progress: p * 100\n        });\n      }\n    } else {\n      this.setState({\n        progress: undefined\n      });\n    }\n  };\n  closeSnackbar = () => {\n    this.setState({\n      snackbar: undefined\n    });\n  };\n  showSnackbar = message => {\n    this.setState({\n      snackbar: message\n    });\n  };\n  search = text => {\n    if (text.length > 0) {\n      this.setState({\n        appSearch: this.state.installedApps.filter(app => app.name.toLowerCase().indexOf(text.toLowerCase()) !== -1).sort((a, b) => a.appType.localeCompare(b.appType) || a.name.localeCompare(b.name)),\n        appSearchText: text\n      });\n    } else {\n      this.setState({\n        appSearch: undefined,\n        appSearchText: undefined\n      });\n    }\n  };\n\n  renderUploadProgress() {\n    if (this.state.uploading) {\n      return <Card style={styles.progress}>\n                    <CardText>\n                        {i18n.t('Uploading...')}\n                        <LinearProgress mode={this.state.progress ? 'determinate' : 'indeterminate'} color=\"#6688AA\" value={this.state.progress} />\n                    </CardText>\n                </Card>;\n    }\n\n    return null;\n  }\n\n  renderInstallProgress() {\n    if (this.state.installing) {\n      return <div style={styles.installing}>\n                    <CircularProgress mode=\"indeterminate\" color=\"#6688AA\" value={this.state.progress} />\n                    <br />\n                    <br />\n                    {i18n.t('Installing...')}\n                </div>;\n    }\n\n    return null;\n  }\n\n  renderSection({\n    key,\n    apps,\n    showUpload\n  }) {\n    if (key === 'store') {\n      return <AppHub appHub={this.state.appHub} d2={this.props.d2} />;\n    }\n\n    const filter = key && key.toString().toUpperCase() || 'APP';\n    return <AppList d2={this.props.d2} installedApps={apps} uploadProgress={this.progress} transitionUnmount={this.state.unmountSection} showUpload={showUpload && !this.state.uploading} appHub={this.state.appHub} appTypeFilter={filter} />;\n  }\n\n  renderSearchResults() {\n    const appsByType = this.state.appSearch.reduce((types, app) => {\n      if (Object.prototype.hasOwnProperty.call(types, app.appType)) {\n        types[app.appType].push(app);\n      } else {\n        types[app.appType] = [app]; // eslint-disable-line\n      }\n\n      return types;\n    }, {});\n\n    if (Object.keys(appsByType).length) {\n      return Object.entries(appsByType).map(([type, apps], i) => <div key={type}>\n                    {this.renderSection({\n          key: type,\n          apps,\n          showUpload: i === 0\n        })}\n                </div>);\n    }\n\n    return <div>\n                <div style={styles.header}>{i18n.t('No apps found')}</div>\n                <div style={styles.noApps}>\n                    {i18n.t('No installed apps matched the search term')} &quot;\n                    {this.state.appSearchText}&quot;\n                </div>\n            </div>;\n  }\n\n  render() {\n    const sections = [{\n      key: 'bundled_app',\n      icon: 'widgets',\n      label: i18n.t('Bundled Apps')\n    }, {\n      key: 'app',\n      icon: 'desktop_windows',\n      label: i18n.t('Standard Apps')\n    }, {\n      key: 'dashboard_widget',\n      icon: 'wallpaper',\n      label: i18n.t('Dashboard Apps')\n    }, {\n      key: 'tracker_dashboard_widget',\n      icon: 'supervisor_account',\n      label: i18n.t('Tracker Dashboard Apps')\n    }, {\n      key: 'resource',\n      icon: 'data_usage',\n      label: i18n.t('Resource Apps')\n    }, {\n      key: 'store',\n      icon: 'store',\n      label: i18n.t('App Hub')\n    }].map(section => ({\n      key: section.key,\n      label: section.label,\n      icon: <FontIcon className=\"material-icons\">{section.icon}</FontIcon>\n    }));\n\n    const reffer = r => {\n      this.sidebar = r;\n    };\n\n    return <div className=\"app\">\n                <SelfUpdateNoticeBox appHub={this.state.appHub} />\n                <Sidebar sections={sections} currentSection={this.state.section} onChangeSection={this.setSection} showSearchField onChangeSearchText={this.search} ref={reffer} />\n                <Snackbar message={this.state.snackbar || ''} autoHideDuration={2500} onRequestClose={this.closeSnackbar} open={!!this.state.snackbar} style={styles.snackbar} />\n                <DataQuery query={bundledAppsQuery}>\n                    {({\n          data\n        }) => {\n          const bundledApps = (data ? data.bundledApps.modules : []).filter(app => !this.state.installedApps.find(a => a.isBundledApp && a.short_name === app.name)).map(app => ({ ...app,\n            name: app.displayName,\n            isBundledApp: true\n          }));\n          return <div className=\"content-area\">\n                                {this.state.appSearch ? this.renderSearchResults() : this.renderSection({\n              key: this.state.section,\n              apps: [...bundledApps, ...this.state.installedApps],\n              showUpload: true\n            })}\n                                {this.renderUploadProgress()}\n                                {this.renderInstallProgress()}\n                            </div>;\n        }}\n                </DataQuery>\n            </div>;\n  }\n\n}\n\nApp.propTypes = {\n  d2: PropTypes.object.isRequired\n};\nApp.childContextTypes = {\n  d2: PropTypes.object,\n  muiTheme: PropTypes.object\n};\nexport default App;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport csTranslations from './cs/translations.json';\nimport enTranslations from './en/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import React from 'react';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport installedAppHub from './stores/installedApp.store';\nimport App from './components/App.component';\nimport theme from './theme';\nimport './locales';\nimport 'material-design-icons-iconfont/dist/material-design-icons.css';\nimport './scss/style.scss';\n\nconst AppWrapper = () => {\n  const {\n    d2\n  } = useD2({\n    onInitialized: d2 => {\n      installedAppHub.setState(d2.system.installedApps);\n    }\n  });\n\n  if (!d2) {\n    return null;\n  }\n\n  return <MuiThemeProvider muiTheme={theme}>\n            <App d2={d2} />\n        </MuiThemeProvider>;\n};\n\nexport default AppWrapper;"],"sourceRoot":""}