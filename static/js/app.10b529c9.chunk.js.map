{"version":3,"sources":["D2App/components/AppDetails/AppDetails.module.css","D2App/App.module.css","D2App/components/Sidebar/Sidebar.module.css","D2App/components/AppIcon/AppIcon.module.css","D2App/components/AppCard/AppCard.module.css","D2App/components/AppCards/AppCards.module.css","D2App/pages/AppHub/AppHub.module.css","D2App/components/AppDetails/Description.module.css","D2App/components/AppHubErrorNoticeBox/AppHubErrorNoticeBox.module.css","D2App/components/AppsList/AppsList.module.css","D2App/pages/ManualInstall/ManualInstall.module.css","D2App/components/Sidebar/Sidebar.js","D2App/components/AppIcon/AppIcon.js","D2App/components/AppCard/AppCard.js","D2App/components/AppCards/AppCards.js","D2App/get-latest-version.js","D2App/pages/AppHub/AppHub.js","D2App/get-app-icon-src.js","D2App/components/AppDetails/Description.js","D2App/api.js","D2App/semver-gt.js","D2App/components/AppDetails/channel-to-display-name.js","D2App/components/AppDetails/ManageInstalledVersion.js","D2App/components/AppDetails/Versions.js","D2App/components/AppDetails/AppDetails.js","D2App/pages/AppHubApp/AppHubApp.js","D2App/locales/index.js","D2App/components/AppHubErrorNoticeBox/AppHubErrorNoticeBox.js","D2App/components/AppsList/AppsList.js","D2App/core-apps.js","D2App/pages/CoreApps/CoreApps.js","D2App/pages/CustomApps/CustomApps.js","D2App/pages/InstalledApp/InstalledApp.js","D2App/pages/ManualInstall/ManualInstall.js","D2App/App.js"],"names":["module","exports","SidebarItem","label","path","exactMatch","history","useHistory","isActive","routeMatch","useRouteMatch","isExact","useIsItemActive","React","createElement","MenuItem","className","styles","sidebarItem","onClick","push","href","active","Sidebar","Menu","minor","patch","showCoreApps","useConfig","serverVersion","i18n","t","FallbackIcon","viewBox","fill","fillRule","height","rx","width","d","AppIcon","src","appIcon","loading","AppCard","iconSrc","appName","appDeveloper","appVersion","appCard","appCardName","appCardMetadata","AppCards","children","appCards","getLatestVersion","versions","reduce","latestVersion","version","parsedLatestVersion","semver","coerce","parsedVersion","gt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","query","appHub","resource","params","pageSize","apps","getIconSrc","app","_app$images$find","images","find","logo","imageUrl","AppCards_","map","id","name","developer","organisation","SearchFilter","onQueryChange","InputField","searchField","placeholder","value","onChange","type","AppsList","pager","onPageChange","Fragment","header","paginationWrapper","Pagination","hidePageSizeSelect","AppHub","systemInfo","queryParams","setQueryParams","useQueryParams","withDefault","StringParam","page","NumberParam","debouncedQuery","useDebounce","error","data","called","refetch","useDataQuery","lazy","variables","dhis_version","useEffect","NoticeBox","title","message","CenteredContent","CircularLoader","result","getAppIconSrc","iconSize","icons","baseUrl","Description","description","split","line","index","trim","paragraph","_defineProperty","obj","defineProperty","enumerable","configurable","writable","Api","constructor","url","method","body","fetch","credentials","then","res","status","Error","statusText","versionId","userGroupId","request","appKey","file","FormData","append","useApi","parseVersion","clean","semverGt","a","b","channelToDisplayName","stable","context","development","canary","ManageInstalledVersion","installedApp","onVersionInstall","onUninstall","isBundled","bundled","canInstall","canUninstall","canUpdate","installVersion","uninstallApp","successAlert","useAlert","success","errorAlert","critical","manageInstalledVersion","Button","primary","async","show","errorMessage","nsSeparator","manageInstalledVersionDescription","channel","secondary","ChannelCheckbox","channelsFilter","setChannelsFilter","channelCheckbox","Checkbox","checked","has","disabled","size","newState","Set","add","delete","ChannelsFilter","channels","keys","filter","some","v","versionsFilters","sectionSubheader","VersionsTable","installedVersion","userGroups","userGroupVersionMapFromDS","userGroupVersionMap","setUserGroupVersionMap","useReducer","newMap","Table","TableHead","TableRowHead","TableCellHead","TableBody","versionActiveForUserGroup","TableRow","TableCell","moment","created","format","UserGroupSelector","onSelect","isInstalled","small","installBtn","Boolean","download","downloadUrl","downloadLink","Versions","appId","useState","installSuccessAlert","installErrorAlert","replace","useSavedObject","global","dhisVersion","major","filteredVersions","minDhisVersion","min","maxDhisVersion","max","range","Range","satisfies","versionsContainer","undefined","userGroup","setUserGroup","useCallback","selected","SingleSelect","dense","SingleSelectOption","group","displayName","Metadata","_getLatestVersion","relativeTime","datetime","fromNow","firstPublishedVersion","lastPublishedVersion","metadataList","metadataItem","Screenshots","screenshots","currentScreenshotIndex","setCurrentScreenshotIndex","currentScreenshot","screenshot","otherScreenshot","otherScreenshotCurrent","AppDetails","appHubApp","_installedApp$develop","_installedApp$develop2","_appHubApp$images$fin","company","sort","Card","headerName","headerDeveloper","Divider","section","mainSection","join","sectionHeader","appHubId","installedApps","AppHubApp","match","app_hub_id","DataStoreProvider","namespace","addResources","arTranslations","ar_IQTranslations","csTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","AppHubErrorNoticeBox","noticeBox","_app$developer","_app$developer2","short_name","handleAppClick","AppsWithUpdates","appsWithUpdates","AllApps","updatesAvailableLabel","allAppsLabel","searchLabel","setQuery","useQueryParam","searchFilter","toLocaleLowerCase","includes","filteredApps","filteredAppsWithUpdates","coreApps","shortName","overriddenCoreApps","modules","appHubQuery","availableCoreApps","paging","core","CoreApps","appHubLoading","appHubError","appHubData","appsByShortName","forEach","coreApp","m","iconUrl","icon","48","values","customApps","availableApps","CustomApps","appsQuery","InstalledApp","_appHubResponse$data","appsResponse","appHubResponse","UploadButton","uploadApp","isUploading","setIsUploading","formEl","useRef","inputEl","hiddenForm","ref","accept","event","files","current","reset","uploadBtn","click","ManualInstall","warning","App","HashRouter","QueryParamProvider","ReactRouterRoute","Route","stringifyOptions","skipEmptyString","CssVariables","spacers","colors","container","sidebar","content","Switch","exact","component","Redirect","from","to"],"mappings":"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","file":"static/js/app.10b529c9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"appCard\":\"AppDetails_appCard__fSGXg\",\"header\":\"AppDetails_header__2Pnoy\",\"section\":\"AppDetails_section__x3oyK\",\"headerName\":\"AppDetails_headerName__1d0bZ\",\"headerDeveloper\":\"AppDetails_headerDeveloper__Z2okw\",\"sectionHeader\":\"AppDetails_sectionHeader__10Eg8\",\"sectionSubheader\":\"AppDetails_sectionSubheader__1h-os\",\"mainSection\":\"AppDetails_mainSection__q2N7R\",\"manageInstalledVersion\":\"AppDetails_manageInstalledVersion__WJejm\",\"manageInstalledVersionDescription\":\"AppDetails_manageInstalledVersionDescription__200Dq\",\"metadataList\":\"AppDetails_metadataList__1bObC\",\"metadataItem\":\"AppDetails_metadataItem__1zDzK\",\"screenshots\":\"AppDetails_screenshots__3tzYW\",\"currentScreenshot\":\"AppDetails_currentScreenshot__3OHwk\",\"otherScreenshot\":\"AppDetails_otherScreenshot__jLXwp\",\"otherScreenshotCurrent\":\"AppDetails_otherScreenshotCurrent__2lgLx\",\"versionsContainer\":\"AppDetails_versionsContainer__3jLeZ\",\"versionsFilters\":\"AppDetails_versionsFilters__3No5N\",\"channelCheckbox\":\"AppDetails_channelCheckbox__3dCjS\",\"installBtn\":\"AppDetails_installBtn__30Mwd\",\"downloadLink\":\"AppDetails_downloadLink__2h9rU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2zgzu\",\"sidebar\":\"App_sidebar__10tAV\",\"content\":\"App_content__3I8HS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarItem\":\"Sidebar_sidebarItem__3GXPY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appIcon\":\"AppIcon_appIcon__v-H2Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appCard\":\"AppCard_appCard__TXApi\",\"appCardName\":\"AppCard_appCardName__2bvfP\",\"appCardMetadata\":\"AppCard_appCardMetadata__1bjfN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appCards\":\"AppCards_appCards__29UcK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHub_header__RrizS\",\"searchField\":\"AppHub_searchField__2rsKM\",\"paginationWrapper\":\"AppHub_paginationWrapper__q2-hr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paragraph\":\"Description_paragraph__2TF69\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noticeBox\":\"AppHubErrorNoticeBox_noticeBox__23NlA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppsList_header__ugswq\",\"searchField\":\"AppsList_searchField__3ITNf\",\"appsWithUpdates\":\"AppsList_appsWithUpdates__2NLCM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ManualInstall_header__1-JUl\",\"warning\":\"ManualInstall_warning__UiJbc\",\"uploadBtn\":\"ManualInstall_uploadBtn__21mh1\",\"hiddenForm\":\"ManualInstall_hiddenForm__1w9c1\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Menu, MenuItem } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport styles from './Sidebar.module.css';\n\nconst useIsItemActive = (path, exactMatch) => {\n  const routeMatch = useRouteMatch(path);\n\n  if (!routeMatch) {\n    return false;\n  }\n\n  if (exactMatch) {\n    return routeMatch.isExact;\n  }\n\n  return true;\n};\n\nconst SidebarItem = ({\n  label,\n  path,\n  exactMatch = false\n}) => {\n  const history = useHistory();\n  const isActive = useIsItemActive(path, exactMatch);\n\n  const navigateToPath = () => history.push(path);\n\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: styles.sidebarItem,\n    onClick: navigateToPath,\n    href: path,\n    active: isActive,\n    label: label\n  });\n};\n\nSidebarItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  exactMatch: PropTypes.bool\n};\n\nconst showCoreApps = ({\n  minor,\n  patch\n}) => minor > 35 || minor == 35 && patch >= 2;\n\nexport const Sidebar = () => /*#__PURE__*/React.createElement(Menu, null, showCoreApps(useConfig().serverVersion) ? /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('Core apps'),\n  path: \"/\",\n  exactMatch: true\n}) : null, /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('Custom apps'),\n  path: \"/custom-apps\"\n}), /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('App Hub'),\n  path: \"/app-hub\"\n}), /*#__PURE__*/React.createElement(SidebarItem, {\n  label: i18n.t('Manual install'),\n  path: \"/manual-install\"\n}));","import { PropTypes } from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './AppIcon.module.css';\n\nconst FallbackIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 72 72\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  fill: \"#f3f5f7\",\n  height: \"72\",\n  rx: \"10.5\",\n  width: \"72\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m60 52.5v3c0 2.3965213-1.8733799 4.3554913-4.2355908 4.492361l-.2644092.007639h-3v-3h3c.7692538 0 1.4032607-.5790603 1.4899084-1.3250683l.0100916-.1749317v-3zm-45 0v3l.0100916.1749317c.0866477.746008.7206546 1.3250683 1.4899084 1.3250683h3v3h-3l-.2644092-.007639c-2.3622109-.1368697-4.2355908-2.0958397-4.2355908-4.492361v-3zm18 4.5v3h-7.5v-3zm13.5 0v3h-7.5v-3zm-31.5-18v7.5h-3v-7.5zm45 0v7.5h-3v-7.5zm-45-13.5v7.5h-3v-7.5zm45 0v7.5h-3v-7.5zm-40.5-13.5v3h-3c-.7692538 0-1.4032607.5790603-1.4899084 1.3250683l-.0100916.1749317v3h-3v-3c0-2.3965213 1.8733799-4.3554913 4.2355908-4.492361l.2644092-.007639zm36 0 .2644092.007639c2.3622109.1368697 4.2355908 2.0958397 4.2355908 4.492361v3h-3v-3l-.0100916-.1749317c-.0866477-.746008-.7206546-1.3250683-1.4899084-1.3250683h-3v-3zm-22.5 0v3h-7.5v-3zm13.5 0v3h-7.5v-3z\",\n  fill: \"#c2ccd6\",\n  fillRule: \"nonzero\"\n})));\n\nexport const AppIcon = ({\n  src\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.appIcon\n}, src ? /*#__PURE__*/React.createElement(\"img\", {\n  src: src,\n  loading: \"lazy\"\n}) : /*#__PURE__*/React.createElement(FallbackIcon, null));\nAppIcon.propTypes = {\n  src: PropTypes.string\n};","import { PropTypes } from '@dhis2/prop-types';\nimport React from 'react';\nimport { AppIcon } from '../AppIcon/AppIcon.js';\nimport styles from './AppCard.module.css';\nexport const AppCard = ({\n  iconSrc,\n  appName,\n  appDeveloper,\n  appVersion,\n  onClick\n}) => /*#__PURE__*/React.createElement(\"button\", {\n  className: styles.appCard,\n  onClick: onClick\n}, /*#__PURE__*/React.createElement(AppIcon, {\n  src: iconSrc\n}), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n  className: styles.appCardName\n}, appName), /*#__PURE__*/React.createElement(\"span\", {\n  className: styles.appCardMetadata\n}, appDeveloper), /*#__PURE__*/React.createElement(\"span\", {\n  className: styles.appCardMetadata\n}, appVersion && `Version ${appVersion}`)));\nAppCard.propTypes = {\n  appName: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  appDeveloper: PropTypes.string,\n  appVersion: PropTypes.string,\n  iconSrc: PropTypes.string\n};","import { PropTypes } from '@dhis2/prop-types';\nimport React from 'react';\nimport styles from './AppCards.module.css';\nexport const AppCards = ({\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.appCards\n}, children);\nAppCards.propTypes = {\n  children: PropTypes.array.isRequired\n};","import semver from 'semver';\nexport const getLatestVersion = versions => versions.reduce((latestVersion, version) => {\n  const parsedLatestVersion = semver.coerce(latestVersion.version);\n  const parsedVersion = semver.coerce(version.version);\n\n  if (parsedVersion) {\n    if (!parsedLatestVersion) {\n      return version;\n    }\n\n    return semver.gt(parsedVersion, parsedLatestVersion) ? version : latestVersion;\n  } else {\n    return latestVersion;\n  }\n}, versions[0]);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { useConfig, useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { InputField, Pagination, NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDebounce } from 'use-debounce';\nimport { useQueryParams, StringParam, NumberParam, withDefault } from 'use-query-params';\nimport { AppCard } from '../../components/AppCard/AppCard.js';\nimport { AppCards as AppCards_ } from '../../components/AppCards/AppCards.js';\nimport { getLatestVersion } from '../../get-latest-version.js';\nimport styles from './AppHub.module.css';\nconst query = {\n  appHub: {\n    resource: 'appHub/v2/apps',\n    params: params => ({\n      pageSize: 24,\n      ...params\n    })\n  }\n};\n\nconst AppCards = ({\n  apps\n}) => {\n  const history = useHistory();\n\n  const getIconSrc = app => {\n    var _app$images$find;\n\n    return (_app$images$find = app.images.find(i => i.logo)) === null || _app$images$find === void 0 ? void 0 : _app$images$find.imageUrl;\n  };\n\n  return /*#__PURE__*/React.createElement(AppCards_, null, apps.map(app => /*#__PURE__*/React.createElement(AppCard, {\n    key: app.id,\n    iconSrc: getIconSrc(app),\n    appName: app.name,\n    appDeveloper: app.developer.organisation || app.developer.name,\n    appVersion: getLatestVersion(app.versions).version,\n    onClick: () => history.push(`/app/${app.id}`)\n  })));\n};\n\nAppCards.propTypes = {\n  apps: PropTypes.array.isRequired\n};\n\nconst SearchFilter = ({\n  query,\n  onQueryChange\n}) => /*#__PURE__*/React.createElement(InputField, {\n  className: styles.searchField,\n  placeholder: i18n.t('Search AppHub apps'),\n  value: query,\n  onChange: ({\n    value\n  }) => onQueryChange(value),\n  type: \"search\"\n});\n\nSearchFilter.propTypes = {\n  onQueryChange: PropTypes.func.isRequired,\n  query: PropTypes.string\n};\n\nconst AppsList = ({\n  apps,\n  pager,\n  onPageChange\n}) => {\n  if (apps.length === 0) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      className: styles.header\n    }, i18n.t('No apps found')), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('No apps match your criteria')));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(AppCards, {\n    apps: apps\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paginationWrapper\n  }, /*#__PURE__*/React.createElement(Pagination, _extends({\n    hidePageSizeSelect: true,\n    onPageChange: onPageChange\n  }, pager))));\n};\n\nAppsList.propTypes = {\n  apps: PropTypes.array.isRequired,\n  pager: PropTypes.object.isRequired,\n  onPageChange: PropTypes.func.isRequired\n};\nexport const AppHub = () => {\n  const {\n    systemInfo\n  } = useConfig();\n  const [queryParams, setQueryParams] = useQueryParams({\n    query: withDefault(StringParam, ''),\n    page: withDefault(NumberParam, 1)\n  });\n  const [debouncedQuery] = useDebounce(queryParams.query, 300);\n  const {\n    loading,\n    error,\n    data,\n    called,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true,\n    variables: {\n      dhis_version: systemInfo.version\n    }\n  });\n  useEffect(() => {\n    refetch(queryParams);\n  }, [debouncedQuery, queryParams.page]);\n\n  const handleQueryChange = query => {\n    setQueryParams({\n      query,\n      page: 1\n    }, 'replace');\n  };\n\n  const handlePageChange = page => {\n    setQueryParams({\n      page\n    });\n  };\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Something went wrong whilst loading App Hub apps')\n    }, error.message);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SearchFilter, {\n    query: queryParams.query,\n    onQueryChange: handleQueryChange\n  }), !called || loading ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : /*#__PURE__*/React.createElement(AppsList, {\n    apps: data.appHub.result,\n    pager: data.appHub.pager,\n    onPageChange: handlePageChange\n  }));\n};","export const getAppIconSrc = app => {\n  const iconSize = ['128', '48', '16'].find(iconSize => iconSize in app.icons);\n\n  if (iconSize) {\n    return `${app.baseUrl}/${app.icons[iconSize]}`;\n  }\n\n  return null;\n};","import React from 'react';\nimport styles from './Description.module.css';\nexport const Description = ({\n  description\n}) => {\n  const lines = description.split('\\n');\n  return lines.map((line, index) => {\n    if (!line.trim()) {\n      return /*#__PURE__*/React.createElement(\"br\", {\n        key: index\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"p\", {\n      key: index,\n      className: styles.paragraph\n    }, line);\n  });\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useConfig } from '@dhis2/app-runtime';\n\nclass Api {\n  constructor({\n    baseUrl\n  }) {\n    _defineProperty(this, \"request\", ({\n      url,\n      method,\n      body\n    }) => fetch(`${this.baseUrl}/api/${url}`, {\n      method,\n      body,\n      credentials: 'include'\n    }).then(res => {\n      if (res.status < 200 || res.status >= 300) {\n        throw new Error(res.statusText);\n      }\n\n      return res;\n    }));\n\n    _defineProperty(this, \"installVersion\", (versionId, userGroupId) => {\n      let url = `appHub/${versionId}`;\n\n      if (userGroupId) {\n        url += `?group=${userGroupId}`;\n      }\n\n      this.request({\n        url,\n        method: 'post'\n      });\n    });\n\n    _defineProperty(this, \"uninstallApp\", appKey => this.request({\n      url: `apps/${appKey}`,\n      method: 'delete'\n    }));\n\n    _defineProperty(this, \"uploadApp\", file => {\n      const data = new FormData();\n      data.append('file', file);\n      return this.request({\n        url: 'apps',\n        method: 'post',\n        body: data\n      });\n    });\n\n    this.baseUrl = baseUrl;\n  }\n\n}\n\nexport const useApi = () => {\n  const {\n    baseUrl\n  } = useConfig();\n  return new Api({\n    baseUrl\n  });\n};","import semver from 'semver';\nconst parseVersion = semver.clean;\nexport const semverGt = (a, b) => {\n  if (parseVersion(a) === null || parseVersion(b) === null) {\n    return false;\n  }\n\n  return semver.gt(parseVersion(a), parseVersion(b));\n};","import i18n from '@dhis2/d2-i18n';\nexport const channelToDisplayName = {\n  stable: i18n.t('Stable', {\n    context: 'Name of AppHub release channel'\n  }),\n  development: i18n.t('Development', {\n    context: 'Name of AppHub release channel'\n  }),\n  canary: i18n.t('Canary', {\n    context: 'Name of AppHub release channel'\n  })\n};","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button } from '@dhis2/ui';\nimport React from 'react';\nimport { useApi } from '../../api.js';\nimport { getLatestVersion } from '../../get-latest-version.js';\nimport { semverGt } from '../../semver-gt.js';\nimport styles from './AppDetails.module.css';\nimport { channelToDisplayName } from './channel-to-display-name.js';\nexport const ManageInstalledVersion = ({\n  installedApp,\n  versions = [],\n  onVersionInstall,\n  onUninstall\n}) => {\n  // Overridden core apps have `bundled` set to true, but unlike preinstalled\n  // apps their `version` field has a value\n  const isBundled = installedApp && installedApp.bundled && !installedApp.version;\n  const latestVersion = getLatestVersion(versions);\n  const canInstall = latestVersion && latestVersion.version !== (installedApp === null || installedApp === void 0 ? void 0 : installedApp.version);\n  const canUninstall = installedApp && !isBundled;\n  const canUpdate = installedApp && latestVersion && semverGt(latestVersion.version, installedApp.version);\n  const {\n    installVersion,\n    uninstallApp\n  } = useApi();\n  const successAlert = useAlert(({\n    message\n  }) => message, {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    message\n  }) => message, {\n    critical: true\n  });\n\n  const handleInstall = async () => {\n    try {\n      await installVersion(latestVersion.id);\n      successAlert.show({\n        message: canUpdate ? i18n.t('App updated successfully') : i18n.t('App installed successfully')\n      });\n      onVersionInstall();\n    } catch (error) {\n      errorAlert.show({\n        message: canUpdate ? i18n.t('Failed to update app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: '-:-'\n        }) : i18n.t('Failed to install app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: '-:-'\n        })\n      });\n    }\n  };\n\n  const handleUninstall = async () => {\n    try {\n      await uninstallApp(installedApp.key);\n      successAlert.show({\n        message: i18n.t('App uninstalled successfully')\n      });\n      onUninstall();\n    } catch (error) {\n      errorAlert.show({\n        message: i18n.t('Failed to uninstall app: {{errorMessage}}', {\n          errorMessage: error.message,\n          nsSeparator: '-:-'\n        })\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.manageInstalledVersion\n  }, canInstall && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleInstall\n  }, canUpdate ? i18n.t('Update to latest version') : i18n.t('Install')), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.manageInstalledVersionDescription\n  }, i18n.t('{{channel}} release {{version}}', {\n    channel: channelToDisplayName[latestVersion.channel],\n    version: latestVersion.version\n  }))), canUninstall && /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: handleUninstall\n  }, i18n.t('Uninstall v{{appVersion}}', {\n    appVersion: installedApp.version\n  })));\n};\nManageInstalledVersion.propTypes = {\n  onVersionInstall: PropTypes.func.isRequired,\n  installedApp: PropTypes.object,\n  versions: PropTypes.array,\n  onUninstall: PropTypes.func\n};","import { useAlert, useConfig } from '@dhis2/app-runtime';\nimport { useSavedObject } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Checkbox, Button, SingleSelect, SingleSelectOption, Table, TableHead, TableRowHead, TableCellHead, TableBody, TableRow, TableCell } from '@dhis2/ui';\nimport moment from 'moment';\nimport React, { useCallback, useEffect, useReducer, useState } from 'react';\nimport semver from 'semver';\nimport { useApi } from '../../api.js';\nimport styles from './AppDetails.module.css';\nimport { channelToDisplayName } from './channel-to-display-name.js';\n\nconst ChannelCheckbox = ({\n  name,\n  label,\n  channelsFilter,\n  setChannelsFilter\n}) => {\n  const handleChange = ({\n    checked\n  }) => {\n    const newState = new Set(channelsFilter);\n\n    if (checked) {\n      newState.add(name);\n    } else {\n      newState.delete(name);\n    }\n\n    setChannelsFilter(newState);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.channelCheckbox\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: channelsFilter.has(name),\n    disabled: channelsFilter.size === 1 && channelsFilter.has(name),\n    onChange: handleChange,\n    label: label\n  }));\n};\n\nChannelCheckbox.propTypes = {\n  channelsFilter: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  setChannelsFilter: PropTypes.func.isRequired\n};\n\nconst ChannelsFilter = ({\n  versions,\n  channelsFilter,\n  setChannelsFilter\n}) => {\n  const hasChannel = channel => versions.some(v => v.channel === channel);\n\n  const channels = Object.keys(channelToDisplayName).filter(hasChannel);\n\n  if (channels.length <= 1) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.versionsFilters\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.sectionSubheader\n  }, i18n.t('Channel', {\n    context: 'AppHub release channel'\n  })), channels.map(name => /*#__PURE__*/React.createElement(ChannelCheckbox, {\n    key: name,\n    name: name,\n    label: channelToDisplayName[name],\n    channelsFilter: channelsFilter,\n    setChannelsFilter: setChannelsFilter\n  })));\n};\n\nChannelsFilter.propTypes = {\n  channelsFilter: PropTypes.object.isRequired,\n  setChannelsFilter: PropTypes.func.isRequired,\n  versions: PropTypes.array.isRequired\n};\n\nconst VersionsTable = ({\n  installedVersion,\n  versions,\n  onVersionInstall,\n  userGroups,\n  userGroupVersionMapFromDS\n}) => {\n  const [userGroupVersionMap, setUserGroupVersionMap] = useReducer((map, newMap) => ({ ...map,\n    ...newMap\n  }), userGroupVersionMapFromDS || {});\n  return /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Version')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Channel', {\n    context: 'AppHub release channel'\n  })), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Upload date')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('User group')), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, versions.map(version => {\n    const versionActiveForUserGroup = Object.keys(userGroupVersionMapFromDS || {}).find(userGroupId => userGroupVersionMapFromDS[userGroupId] === version.version);\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: version.id\n    }, /*#__PURE__*/React.createElement(TableCell, null, version.version), /*#__PURE__*/React.createElement(TableCell, null, channelToDisplayName[version.channel]), /*#__PURE__*/React.createElement(TableCell, null, moment(version.created).format('ll')), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(UserGroupSelector, {\n      userGroups: userGroups,\n      version: version.version,\n      onSelect: setUserGroupVersionMap,\n      versionActiveForUserGroup: versionActiveForUserGroup,\n      isInstalled: version.version === installedVersion\n    })), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(Button, {\n      small: true,\n      secondary: true,\n      className: styles.installBtn,\n      disabled: version.version === installedVersion || Boolean(versionActiveForUserGroup),\n      onClick: () => onVersionInstall(version, Object.keys(userGroupVersionMap).find(userGroupId => userGroupVersionMap[userGroupId] === version.version))\n    }, version.version === installedVersion || versionActiveForUserGroup ? i18n.t('Installed') : i18n.t('Install')), /*#__PURE__*/React.createElement(\"a\", {\n      download: true,\n      href: version.downloadUrl,\n      className: styles.downloadLink\n    }, /*#__PURE__*/React.createElement(Button, {\n      small: true,\n      secondary: true\n    }, i18n.t('Download')))));\n  })));\n};\n\nVersionsTable.propTypes = {\n  userGroups: PropTypes.array.isRequired,\n  versions: PropTypes.array.isRequired,\n  onVersionInstall: PropTypes.func.isRequired,\n  installedVersion: PropTypes.string,\n  userGroupVersionMapFromDS: PropTypes.object\n};\nexport const Versions = ({\n  installedVersion,\n  versions,\n  onVersionInstall,\n  userGroups,\n  appId\n}) => {\n  const [channelsFilter, setChannelsFilter] = useState(new Set(['stable']));\n  const installSuccessAlert = useAlert(i18n.t('App installed successfully'), {\n    success: true\n  });\n  const installErrorAlert = useAlert(({\n    error\n  }) => i18n.t('Failed to install app: {{errorMessage}}', {\n    errorMessage: error.message,\n    nsSeparator: '-:-'\n  }), {\n    critical: true\n  });\n  const {\n    serverVersion\n  } = useConfig();\n  const [userGroupVersionMap, {\n    replace\n  }] = useSavedObject(appId, {\n    global: true\n  });\n  const {\n    installVersion\n  } = useApi();\n  const dhisVersion = semver.coerce(`${serverVersion.major}.${serverVersion.minor}`);\n\n  const satisfiesDhisVersion = version => {\n    const {\n      minDhisVersion: min,\n      maxDhisVersion: max\n    } = version;\n\n    if (!min && !max) {\n      return true;\n    } else if (min && max) {\n      const range = new semver.Range(`${min} - ${max}`);\n      return semver.satisfies(dhisVersion, range);\n    } else if (!min && max) {\n      const range = new semver.Range(`<=${max}`);\n      return semver.satisfies(dhisVersion, range);\n    } else if (min && !max) {\n      const range = new semver.Range(`>=${min}`);\n      return semver.satisfies(dhisVersion, range);\n    }\n  };\n\n  const filteredVersions = versions.filter(version => channelsFilter.has(version.channel)).filter(satisfiesDhisVersion);\n\n  const handleVersionInstall = async (version, userGroupId) => {\n    try {\n      await installVersion(version.id, userGroupId !== 'all' ? userGroupId : undefined);\n      installSuccessAlert.show();\n\n      if (userGroupId) {\n        replace({ ...userGroupVersionMap,\n          ...{\n            [userGroupId]: version.version\n          }\n        });\n      }\n\n      onVersionInstall();\n    } catch (error) {\n      installErrorAlert.show({\n        error\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.versionsContainer\n  }, /*#__PURE__*/React.createElement(ChannelsFilter, {\n    versions: versions,\n    channelsFilter: channelsFilter,\n    setChannelsFilter: setChannelsFilter\n  }), filteredVersions.length > 0 ? /*#__PURE__*/React.createElement(VersionsTable, {\n    installedVersion: installedVersion,\n    versions: filteredVersions,\n    onVersionInstall: handleVersionInstall,\n    userGroups: userGroups,\n    userGroupVersionMapFromDS: userGroupVersionMap,\n    appId: appId\n  }) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('There are no compatible versions matching your criteria')));\n};\nVersions.propTypes = {\n  appId: PropTypes.string.isRequired,\n  userGroups: PropTypes.array.isRequired,\n  versions: PropTypes.array.isRequired,\n  onVersionInstall: PropTypes.func.isRequired,\n  installedVersion: PropTypes.string\n};\n\nconst UserGroupSelector = ({\n  userGroups,\n  version,\n  onSelect,\n  versionActiveForUserGroup,\n  isInstalled\n}) => {\n  const DEFAULT_USER_GROUP_ID = 'all';\n  const [userGroup, setUserGroup] = useState(versionActiveForUserGroup);\n  const onChange = useCallback(({\n    selected\n  }) => {\n    setUserGroup(selected);\n    onSelect({\n      [selected]: version\n    });\n  }, [onSelect, version]);\n  useEffect(() => {\n    if (!versionActiveForUserGroup && isInstalled) {\n      onChange({\n        selected: DEFAULT_USER_GROUP_ID\n      });\n    }\n  }, [isInstalled, versionActiveForUserGroup, onChange]);\n  return /*#__PURE__*/React.createElement(SingleSelect, {\n    dense: true,\n    selected: userGroup,\n    onChange: onChange,\n    placeholder: i18n.t('Choose a user group'),\n    disabled: isInstalled || Boolean(versionActiveForUserGroup)\n  }, /*#__PURE__*/React.createElement(SingleSelectOption, {\n    dense: true,\n    label: i18n.t('All user groups'),\n    value: DEFAULT_USER_GROUP_ID\n  }), userGroups.map(group => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    dense: true,\n    label: group.displayName,\n    value: group.id,\n    key: group.id\n  })));\n};\n\nUserGroupSelector.propTypes = {\n  userGroups: PropTypes.array.isRequired,\n  version: PropTypes.string.isRequired,\n  isInstalled: PropTypes.bool,\n  versionActiveForUserGroup: PropTypes.string,\n  onSelect: PropTypes.func\n};","import i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Card, Divider } from '@dhis2/ui';\nimport moment from 'moment';\nimport React, { useState } from 'react';\nimport { getAppIconSrc } from '../../get-app-icon-src.js';\nimport { getLatestVersion } from '../../get-latest-version.js';\nimport { AppIcon } from '../AppIcon/AppIcon.js';\nimport styles from './AppDetails.module.css';\nimport { Description } from './Description.js';\nimport { ManageInstalledVersion } from './ManageInstalledVersion.js';\nimport { Versions } from './Versions.js';\n\nconst Metadata = ({\n  installedVersion,\n  versions\n}) => {\n  var _getLatestVersion;\n\n  const relativeTime = datetime => moment(datetime).fromNow();\n\n  const latestVersion = (_getLatestVersion = getLatestVersion(versions)) === null || _getLatestVersion === void 0 ? void 0 : _getLatestVersion.version;\n  const firstPublishedVersion = versions[versions.length - 1];\n  const lastPublishedVersion = versions[0];\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.metadataList\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, installedVersion ? i18n.t('Version {{version}} installed', {\n    version: installedVersion\n  }) : i18n.t('Version {{version}}', {\n    version: latestVersion\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('Last updated {{relativeTime}}', {\n    relativeTime: relativeTime(lastPublishedVersion.created)\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.metadataItem\n  }, i18n.t('First published {{relativeTime}}', {\n    relativeTime: relativeTime(firstPublishedVersion.created)\n  })));\n};\n\nMetadata.propTypes = {\n  versions: PropTypes.array.isRequired,\n  installedVersion: PropTypes.string\n};\n\nconst Screenshots = ({\n  screenshots\n}) => {\n  const [currentScreenshotIndex, setCurrentScreenshotIndex] = useState(0);\n  const currentScreenshot = screenshots[currentScreenshotIndex];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.screenshots\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.currentScreenshot,\n    src: currentScreenshot\n  })), /*#__PURE__*/React.createElement(\"div\", null, screenshots.map((screenshot, index) => /*#__PURE__*/React.createElement(\"button\", {\n    key: index,\n    onClick: () => setCurrentScreenshotIndex(index),\n    className: styles.otherScreenshot + ' ' + (index === currentScreenshotIndex ? styles.otherScreenshotCurrent : '')\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: screenshot\n  })))));\n};\n\nScreenshots.propTypes = {\n  screenshots: PropTypes.array.isRequired\n};\nexport const AppDetails = ({\n  installedApp,\n  appHubApp,\n  userGroups,\n  onVersionInstall,\n  onUninstall\n}) => {\n  var _installedApp$develop, _installedApp$develop2, _appHubApp$images$fin;\n\n  const appName = installedApp ? installedApp.name : appHubApp.name;\n  const appDeveloper = appHubApp ? appHubApp.developer.organisation || appHubApp.developer.name : ((_installedApp$develop = installedApp.developer) === null || _installedApp$develop === void 0 ? void 0 : _installedApp$develop.company) || ((_installedApp$develop2 = installedApp.developer) === null || _installedApp$develop2 === void 0 ? void 0 : _installedApp$develop2.name);\n  const logo = installedApp ? getAppIconSrc(installedApp) : (_appHubApp$images$fin = appHubApp.images.find(i => i.logo)) === null || _appHubApp$images$fin === void 0 ? void 0 : _appHubApp$images$fin.imageUrl;\n  const description = appHubApp ? appHubApp.description : installedApp.description;\n  const screenshots = appHubApp === null || appHubApp === void 0 ? void 0 : appHubApp.images.filter(i => !i.logo).map(i => i.imageUrl);\n  const versions = appHubApp === null || appHubApp === void 0 ? void 0 : appHubApp.versions.sort((a, b) => b.created - a.created);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.appCard\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(AppIcon, {\n    src: logo\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.headerName\n  }, appName), appDeveloper && /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.headerDeveloper\n  }, i18n.t('by {{- developer}}', {\n    developer: appDeveloper,\n    context: 'developer of application'\n  })))), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: [styles.section, styles.mainSection].join(' ')\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('About this app')), description ? /*#__PURE__*/React.createElement(Description, {\n    description: description\n  }) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('The developer of this application has not provided a description'))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ManageInstalledVersion, {\n    installedApp: installedApp,\n    versions: appHubApp === null || appHubApp === void 0 ? void 0 : appHubApp.versions,\n    onVersionInstall: onVersionInstall,\n    onUninstall: onUninstall\n  }), installedApp && appHubApp && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('Additional information')), /*#__PURE__*/React.createElement(Metadata, {\n    installedVersion: installedApp.version,\n    versions: versions\n  })))), (screenshots === null || screenshots === void 0 ? void 0 : screenshots.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('Screenshots')), /*#__PURE__*/React.createElement(Screenshots, {\n    screenshots: screenshots\n  }))), appHubApp && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.sectionHeader\n  }, i18n.t('All compatible versions of this application')), /*#__PURE__*/React.createElement(Versions, {\n    installedVersion: installedApp === null || installedApp === void 0 ? void 0 : installedApp.version,\n    versions: versions,\n    userGroups: userGroups,\n    onVersionInstall: onVersionInstall,\n    appId: appHubApp.id\n  }))));\n};\nAppDetails.propTypes = {\n  onVersionInstall: PropTypes.func.isRequired,\n  appHubApp: PropTypes.object,\n  installedApp: PropTypes.object,\n  userGroups: PropTypes.array,\n  onUninstall: PropTypes.func\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { DataStoreProvider } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AppDetails } from '../../components/AppDetails/AppDetails.js';\nconst query = {\n  appHubApp: {\n    resource: 'appHub/v1/apps',\n    id: ({\n      appHubId\n    }) => appHubId\n  },\n  installedApps: {\n    resource: 'apps'\n  },\n  userGroups: {\n    resource: 'userGroups'\n  }\n};\nexport const AppHubApp = ({\n  match\n}) => {\n  const {\n    appHubId\n  } = match.params;\n  const history = useHistory();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    variables: {\n      appHubId\n    }\n  });\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading app')\n    }, error.message);\n  }\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const {\n    appHubApp,\n    installedApps,\n    userGroups\n  } = data;\n\n  if (!appHubApp) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading app')\n    }, i18n.t('App not found'));\n  }\n\n  const installedApp = installedApps.find(app => app.app_hub_id === appHubId);\n  return /*#__PURE__*/React.createElement(DataStoreProvider, {\n    namespace: \"app-management\"\n  }, /*#__PURE__*/React.createElement(AppDetails, {\n    installedApp: installedApp,\n    appHubApp: appHubApp,\n    userGroups: userGroups.userGroups,\n    onVersionInstall: refetch,\n    onUninstall: () => history.push('/app-hub')\n  }));\n};\nAppHubApp.propTypes = {\n  match: PropTypes.object.isRequired\n};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport csTranslations from './cs/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { NoticeBox } from '@dhis2/ui';\nimport React from 'react';\nimport i18n from '../../locales/index.js';\nimport styles from './AppHubErrorNoticeBox.module.css';\nexport const AppHubErrorNoticeBox = () => /*#__PURE__*/React.createElement(NoticeBox, {\n  error: true,\n  title: i18n.t('Failed to check App Hub for available updates'),\n  className: styles.noticeBox\n}, i18n.t('Your DHIS2 server might be offline.'));","import i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { InputField } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useQueryParam, StringParam, withDefault } from 'use-query-params';\nimport { getAppIconSrc } from '../../get-app-icon-src.js';\nimport { AppCard } from '../AppCard/AppCard.js';\nimport { AppCards as AppCards_ } from '../AppCards/AppCards.js';\nimport styles from './AppsList.module.css';\n\nconst AppCards = ({\n  apps\n}) => {\n  const history = useHistory();\n\n  const handleAppClick = app => {\n    if (!app.version && !app.appHub) {\n      return;\n    }\n\n    history.push(app.appHub ? `/app/${app.appHub.id}` : `/installed-app/${app.key}`);\n  };\n\n  return /*#__PURE__*/React.createElement(AppCards_, null, apps.map(app => {\n    var _app$developer, _app$developer2;\n\n    return /*#__PURE__*/React.createElement(AppCard, {\n      key: app.short_name,\n      iconSrc: getAppIconSrc(app),\n      appName: app.name,\n      appDeveloper: ((_app$developer = app.developer) === null || _app$developer === void 0 ? void 0 : _app$developer.company) || ((_app$developer2 = app.developer) === null || _app$developer2 === void 0 ? void 0 : _app$developer2.name),\n      appVersion: app.version,\n      onClick: () => handleAppClick(app)\n    });\n  }));\n};\n\nAppCards.propTypes = {\n  apps: PropTypes.array.isRequired\n};\n\nconst AppsWithUpdates = ({\n  label,\n  apps\n}) => {\n  if (apps.length === 0) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.appsWithUpdates\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.header\n  }, label), /*#__PURE__*/React.createElement(AppCards, {\n    apps: apps\n  }));\n};\n\nAppsWithUpdates.propTypes = {\n  apps: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\n\nconst AllApps = ({\n  label,\n  apps\n}) => {\n  if (apps.length === 0) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      className: styles.header\n    }, i18n.t('No apps found')), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('No apps match your criteria')));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.header\n  }, label), /*#__PURE__*/React.createElement(AppCards, {\n    apps: apps\n  }));\n};\n\nAllApps.propTypes = {\n  apps: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\nexport const AppsList = ({\n  apps,\n  appsWithUpdates,\n  updatesAvailableLabel,\n  allAppsLabel,\n  searchLabel\n}) => {\n  const [query, setQuery] = useQueryParam('query', withDefault(StringParam, ''));\n\n  const handleQueryChange = ({\n    value\n  }) => {\n    setQuery(value, 'replaceIn');\n  };\n\n  const searchFilter = app => !query || app.name.toLocaleLowerCase().includes(query.toLocaleLowerCase());\n\n  const filteredApps = apps.filter(searchFilter);\n  const filteredAppsWithUpdates = (appsWithUpdates || []).filter(searchFilter);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(InputField, {\n    className: styles.searchField,\n    value: query,\n    placeholder: searchLabel,\n    onChange: handleQueryChange,\n    type: \"search\"\n  }), /*#__PURE__*/React.createElement(AppsWithUpdates, {\n    apps: filteredAppsWithUpdates,\n    label: updatesAvailableLabel\n  }), /*#__PURE__*/React.createElement(AllApps, {\n    apps: filteredApps,\n    label: allAppsLabel\n  }));\n};\nAppsList.propTypes = {\n  allAppsLabel: PropTypes.string.isRequired,\n  searchLabel: PropTypes.string.isRequired,\n  updatesAvailableLabel: PropTypes.string.isRequired,\n  apps: PropTypes.array,\n  appsWithUpdates: PropTypes.array\n};","export const coreApps = [{\n  name: 'App Management',\n  shortName: 'app-management'\n}, {\n  name: 'Cache Cleaner',\n  shortName: 'cache-cleaner'\n}, {\n  name: 'Capture',\n  shortName: 'capture'\n}, {\n  name: 'Dashboard',\n  shortName: 'dashboard'\n}, {\n  name: 'Data Administration',\n  shortName: 'data-administration'\n}, {\n  name: 'Data Approval',\n  shortName: 'approval'\n}, {\n  name: 'Data Entry',\n  shortName: 'dataentry'\n}, {\n  name: 'Data Quality',\n  shortName: 'data-quality'\n}, {\n  name: 'Data Visualizer',\n  shortName: 'data-visualizer'\n}, {\n  name: 'Datastore',\n  shortName: 'datastore'\n}, {\n  name: 'Event Reports',\n  shortName: 'event-reports'\n}, {\n  name: 'Event Visualizer',\n  shortName: 'event-visualizer'\n}, {\n  name: 'Import/Export',\n  shortName: 'import-export'\n}, {\n  name: 'Interpretations',\n  shortName: 'interpretation'\n}, {\n  name: 'Maintenance',\n  shortName: 'maintenance'\n}, {\n  name: 'Maps',\n  shortName: 'maps'\n}, {\n  name: 'Menu Management',\n  shortName: 'menu-management'\n}, {\n  name: 'Messaging',\n  shortName: 'messaging'\n}, {\n  name: 'Pivot Table',\n  shortName: 'pivot'\n}, {\n  name: 'Reports',\n  shortName: 'reports'\n}, {\n  name: 'SMS Configuration',\n  shortName: 'sms-configuration'\n}, {\n  name: 'Scheduler',\n  shortName: 'scheduler'\n}, {\n  name: 'System Settings',\n  shortName: 'settings'\n}, {\n  name: 'Tracker Capture',\n  shortName: 'tracker-capture'\n}, {\n  name: 'Translations',\n  shortName: 'translations'\n}, {\n  name: 'Usage Analytics',\n  shortName: 'usage-analytics'\n}, {\n  name: 'User Profile',\n  shortName: 'user-profile'\n}, {\n  name: 'Users',\n  shortName: 'user'\n}];","import { useDataQuery, useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport { AppHubErrorNoticeBox } from '../../components/AppHubErrorNoticeBox/AppHubErrorNoticeBox.js';\nimport { AppsList } from '../../components/AppsList/AppsList.js';\nimport { coreApps } from '../../core-apps.js';\nimport { getLatestVersion } from '../../get-latest-version.js';\nimport { semverGt } from '../../semver-gt.js';\nconst query = {\n  overriddenCoreApps: {\n    resource: 'apps',\n    params: {\n      filter: 'bundled:eq:true'\n    }\n  },\n  modules: {\n    resource: 'action::menu/getModules'\n  }\n};\nconst appHubQuery = {\n  availableCoreApps: {\n    resource: 'appHub/v2/apps',\n    params: ({\n      dhis_version\n    }) => ({\n      paging: false,\n      core: true,\n      dhis_version\n    })\n  }\n};\nexport const CoreApps = () => {\n  const {\n    baseUrl,\n    systemInfo\n  } = useConfig();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query, {\n    variables: {\n      dhis_version: systemInfo.version\n    }\n  });\n  const {\n    loading: appHubLoading,\n    error: appHubError,\n    data: appHubData\n  } = useDataQuery(appHubQuery, {\n    variables: {\n      dhis_version: systemInfo.version\n    }\n  });\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Something went wrong whilst loading your core apps')\n    }, error.message);\n  }\n\n  if (loading || appHubLoading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const appsByShortName = {};\n  appHubData === null || appHubData === void 0 ? void 0 : appHubData.availableCoreApps.forEach(app => {\n    const coreApp = coreApps.find(({\n      name\n    }) => name === app.name);\n\n    if (!coreApp) {\n      return;\n    }\n\n    const {\n      shortName\n    } = coreApp;\n    const module = data.modules.modules.find(m => m.name === `dhis-web-${shortName}`);\n    const name = (module === null || module === void 0 ? void 0 : module.displayName) || app.name;\n    const iconUrl = module === null || module === void 0 ? void 0 : module.icon;\n    const icons = iconUrl ? {\n      48: iconUrl\n    } : {};\n    appsByShortName[shortName] = {\n      short_name: shortName,\n      appHub: app,\n      baseUrl: `${baseUrl}/dhis-web-${shortName}`,\n      name,\n      icons\n    };\n  });\n  data.overriddenCoreApps.forEach(app => {\n    if (!(app.short_name in appsByShortName)) {\n      appsByShortName[app.short_name] = app;\n    }\n\n    appsByShortName[app.short_name].version = app.version;\n  });\n  const apps = Object.values(appsByShortName);\n  const appsWithUpdates = apps.filter(app => {\n    var _getLatestVersion;\n\n    return app.appHub && (!app.version || semverGt((_getLatestVersion = getLatestVersion(app.appHub.versions)) === null || _getLatestVersion === void 0 ? void 0 : _getLatestVersion.version, app.version));\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, appHubError && /*#__PURE__*/React.createElement(AppHubErrorNoticeBox, null), /*#__PURE__*/React.createElement(AppsList, {\n    apps: apps,\n    appsWithUpdates: appsWithUpdates,\n    updatesAvailableLabel: i18n.t('Core apps with updates available'),\n    allAppsLabel: i18n.t('All core apps'),\n    searchLabel: i18n.t('Search core apps')\n  }));\n};","import { useDataQuery, useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport { AppHubErrorNoticeBox } from '../../components/AppHubErrorNoticeBox/AppHubErrorNoticeBox.js';\nimport { AppsList } from '../../components/AppsList/AppsList.js';\nimport { getLatestVersion } from '../../get-latest-version.js';\nimport { semverGt } from '../../semver-gt.js';\nconst query = {\n  customApps: {\n    resource: 'apps',\n    params: {\n      bundled: false\n    }\n  }\n};\nconst appHubQuery = {\n  // TODO: Add ability to request certain app IDs to `/v2/apps` API and use\n  // that instead\n  availableApps: {\n    resource: 'appHub/v2/apps',\n    params: ({\n      dhis_version\n    }) => ({\n      paging: false,\n      dhis_version\n    })\n  }\n};\nexport const CustomApps = () => {\n  const {\n    systemInfo\n  } = useConfig();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query, {\n    variables: {\n      dhis_version: systemInfo.version\n    }\n  });\n  const {\n    loading: appHubLoading,\n    error: appHubError,\n    data: appHubData\n  } = useDataQuery(appHubQuery, {\n    variables: {\n      dhis_version: systemInfo.version\n    }\n  });\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Something went wrong whilst loading your custom apps')\n    }, error.message);\n  }\n\n  if (loading || appHubLoading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const apps = data.customApps.filter(app => !app.bundled).map(app => ({ ...app,\n    appHub: app.app_hub_id && (appHubData === null || appHubData === void 0 ? void 0 : appHubData.availableApps.find(({\n      id\n    }) => id === app.app_hub_id))\n  }));\n  const appsWithUpdates = apps.filter(app => {\n    var _getLatestVersion;\n\n    return app.appHub && semverGt((_getLatestVersion = getLatestVersion(app.appHub.versions)) === null || _getLatestVersion === void 0 ? void 0 : _getLatestVersion.version, app.version);\n  });\n  return /*#__PURE__*/React.createElement(\"div\", null, appHubError && /*#__PURE__*/React.createElement(AppHubErrorNoticeBox, null), /*#__PURE__*/React.createElement(AppsList, {\n    apps: apps,\n    appsWithUpdates: appsWithUpdates,\n    updatesAvailableLabel: i18n.t('Custom apps with updates available'),\n    allAppsLabel: i18n.t('All installed custom apps'),\n    searchLabel: i18n.t('Search installed custom apps')\n  }));\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { NoticeBox, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AppDetails } from '../../components/AppDetails/AppDetails.js';\nimport { AppHubErrorNoticeBox } from '../../components/AppHubErrorNoticeBox/AppHubErrorNoticeBox.js';\nconst appsQuery = {\n  modules: {\n    resource: 'action::menu/getModules'\n  },\n  installedApps: {\n    resource: 'apps'\n  }\n};\nconst appHubQuery = {\n  app: {\n    resource: `appHub/v1/apps`,\n    id: ({\n      appHubId\n    }) => appHubId\n  }\n};\nexport const InstalledApp = ({\n  match\n}) => {\n  var _appHubResponse$data;\n\n  const {\n    appKey\n  } = match.params;\n  const history = useHistory();\n  const appsResponse = useDataQuery(appsQuery);\n  const appHubResponse = useDataQuery(appHubQuery, {\n    lazy: true\n  });\n\n  if (appsResponse.error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading app')\n    }, appsResponse.error.message);\n  }\n\n  if (appsResponse.loading || appHubResponse.loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  const {\n    modules: {\n      modules\n    },\n    installedApps\n  } = appsResponse.data;\n  const app = installedApps.find(app => app.key === appKey);\n\n  if (!app) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading app')\n    }, i18n.t('App not found'));\n  }\n\n  const module = modules.find(app => app.name === `dhis-web-${appKey}`);\n\n  if (module) {\n    app.name = module.displayName;\n  }\n\n  if (app.app_hub_id && !appHubResponse.called) {\n    appHubResponse.refetch({\n      appHubId: app.app_hub_id\n    });\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, appHubResponse.error && /*#__PURE__*/React.createElement(AppHubErrorNoticeBox, null), /*#__PURE__*/React.createElement(AppDetails, {\n    installedApp: app,\n    appHubApp: (_appHubResponse$data = appHubResponse.data) === null || _appHubResponse$data === void 0 ? void 0 : _appHubResponse$data.app,\n    onVersionInstall: appsResponse.refetch,\n    onUninstall: () => history.push('/custom-apps')\n  }));\n};\nInstalledApp.propTypes = {\n  match: PropTypes.object.isRequired\n};","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader } from '@dhis2/ui';\nimport React, { useState, useRef } from 'react';\nimport { useApi } from '../../api.js';\nimport styles from './ManualInstall.module.css';\n\nconst UploadButton = () => {\n  const {\n    uploadApp\n  } = useApi();\n  const [isUploading, setIsUploading] = useState(false);\n  const successAlert = useAlert(i18n.t('App installed successfully'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Failed to install app: {{errorMessage}}', {\n    errorMessage: error.message,\n    nsSeparator: '-:-'\n  }), {\n    critical: true\n  });\n  const formEl = useRef(null);\n  const inputEl = useRef(null);\n\n  const handleClick = () => {\n    inputEl.current.click();\n  };\n\n  const handleUpload = async event => {\n    setIsUploading(true);\n\n    try {\n      await uploadApp(event.target.files[0]);\n      formEl.current.reset();\n      successAlert.show();\n    } catch (error) {\n      errorAlert.show({\n        error\n      });\n    }\n\n    setIsUploading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    className: styles.hiddenForm,\n    ref: formEl\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"application/zip\",\n    ref: inputEl,\n    onChange: handleUpload\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    className: styles.uploadBtn,\n    onClick: handleClick,\n    disabled: isUploading\n  }, isUploading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Uploading...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Upload an app to install')));\n};\n\nexport const ManualInstall = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n  className: styles.header\n}, i18n.t('Manually install an app')), /*#__PURE__*/React.createElement(\"p\", {\n  className: styles.warning\n}, i18n.t('Installed apps have access to your DHIS2 data and metadata. Make sure you trust an app before installing it.')), /*#__PURE__*/React.createElement(UploadButton, null));","import { CssVariables } from '@dhis2/ui';\nimport React from 'react';\nimport { HashRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport styles from './App.module.css';\nimport { Sidebar } from './components/Sidebar/Sidebar.js';\nimport { AppHub } from './pages/AppHub/AppHub.js';\nimport { AppHubApp } from './pages/AppHubApp/AppHubApp.js';\nimport { CoreApps } from './pages/CoreApps/CoreApps.js';\nimport { CustomApps } from './pages/CustomApps/CustomApps.js';\nimport { InstalledApp } from './pages/InstalledApp/InstalledApp.js';\nimport { ManualInstall } from './pages/ManualInstall/ManualInstall.js';\nimport './locales/index.js';\n\nconst App = () => /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(QueryParamProvider, {\n  ReactRouterRoute: Route,\n  stringifyOptions: {\n    skipEmptyString: true\n  }\n}, /*#__PURE__*/React.createElement(CssVariables, {\n  spacers: true,\n  colors: true\n}), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.container\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.sidebar\n}, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"main\", {\n  className: styles.content\n}, /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: CoreApps\n}), /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/custom-apps\",\n  component: CustomApps\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/installed-app/:appKey\",\n  component: InstalledApp\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/app-hub\",\n  component: AppHub\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/app/:appHubId\",\n  component: AppHubApp\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/manual-install\",\n  component: ManualInstall\n}), /*#__PURE__*/React.createElement(Redirect, {\n  from: \"*\",\n  to: \"/\"\n}))))));\n\nexport default App;"],"sourceRoot":""}